<?xml version='1.0' encoding='utf-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:epub="http://www.idpf.org/2007/ops" epub:prefix="z3998: http://www.daisy.org/z3998/2012/vocab/structure/#" lang="en" xml:lang="en">
  <head/>
  <body><p class="calibre_2">The Netscape browser has actually implemented preferences using both of these </p>
    <p class="calibre_2">techniques. In Version 3, preferences were saved as simple key/value pairs:</p>
    <p class="calibre_2">SHOW_TOOLBAR: False</p>
    <p class="calibre_2">Later, Version 4 preferences looked more like JavaScript:</p>
    <p class="calibre_2">user_pref("custtoolbar.Browser.Navigation_Toolbar.open", false); </p>
    <p class="calibre_2">
      <span class="bold">Metadata-Driven Applications</span>
    </p>
    <p class="calibre_2">But we want to go beyond using metadata for simple preferences. We want to configure </p>
    <p class="calibre_2">and drive the application via metadata as much as possible. Our goal is to think </p>
    <p class="calibre_2">declaratively (specifying <span class="italic">what</span> is to be done, not <span class="italic">how)</span> and create highly dynamic and</p>
    <p class="calibre_2">adaptable programs. We do this by adopting a general rule: program for the general case, </p>
    <p class="calibre_2">and put the specifics somewhere else—outside the compiled code base. </p>
    <p class="calibre_2">
      <span class="bold">Tip 38</span>
    </p>
    <p class="calibre_2">Put Abstractions in Code Details in Metadata</p>
    <p class="calibre_2">There are several benefits to this approach:</p>
    <p class="calibre_2">It forces you to decouple your design, which results in a more flexible and </p>
    <p class="calibre_2">adaptable program. </p>
    <p class="calibre_2">It forces you to create a more robust, abstract design by deferring</p>
    <p class="calibre_2">details—deferring them all the way out of the program. </p>
    <p class="calibre_2">You can customize the application without recompiling it. You can also use this </p>
    <p class="calibre_2">level of customization to provide easy work-arounds for critical bugs in live </p>
    <p class="calibre_2">production systems. </p>
    <p class="calibre_2">Metadata can be expressed in a manner that's much closer to the problem domain </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">than a general-purpose programming language might be (see Domain Languages</span></span></a>). </p>
    <p class="calibre_2">You may even be able to implement several different projects using the same </p>
    <p class="calibre_2">application engine, but with different metadata. </p>
    <p class="calibre_2">We want to defer definition of most details until the last moment, and leave the details as</p>
    <p class="calibre_2">soft—as easy to change—as we can. By crafting a solution that allows us to make changes</p>
    <p class="calibre_2">quickly, we stand a better chance of coping with the flood of directional shifts that swamp</p>
    <p class="calibre_2">many projects (see <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Reversibility</span></span></a>). </p>
    <p class="calibre_2">
      <span class="bold">Business Logic</span>
    </p>
    <p class="calibre_2">So you've made the choice of database engine a configuration option, and provided </p>
    <p class="calibre_2">metadata to determine the user-interface style. Can we do more? Definitely. </p>
    <p class="calibre_2">Because business policy and rules are more likely to change than any other aspect of the </p>
    <p class="calibre_2">project, it makes sense to maintain them in a very flexible format. </p>
    <p class="calibre_2">For example, your purchasing application may include various corporate policies. Maybe </p>
    <p class="calibre_2">you pay small suppliers in 45 days and large ones in 90 days. Make the definitions of the </p>
    <p class="calibre_2">supplier types, as well as the time periods themselves, configurable. Take the opportunity </p>
    <p class="calibre_2">to generalize. </p>
    <p class="calibre_2">Maybe you are writing a system with horrendous workflow requirements. Actions start and </p>
    <p class="calibre_2">stop according to complex (and changing) business rules. Consider encoding them in </p>
    <p class="calibre_2">some kind of rule-based (or expert) system, embedded within your application. That way, </p>
    <p class="calibre_2">you'll configure it by writing rules, not cutting code. </p>
    <p class="calibre_2">Less complex logic can be expressed using a mini-language, removing the need to </p>
    <p class="calibre_2">recompile and redeploy when the environment changes. Have a look at page 58 for an </p>
    <p class="calibre_2">example. </p>
    <p class="calibre_2">
      <span class="bold">When to Configure</span>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">As mentioned in The power of plain Text, we recommend representin</span></span></a>g</p>
    <p class="calibre_2">configuration metadata in plain text—it makes life that much easier. </p>
    <p class="calibre_2">But when should a program read this configuration? Many programs will scan </p>
    <p class="calibre_2">such things only at startup, which is unfortunate. If you need to change the </p>
    <p class="calibre_2">configuration, this forces you to restart the application. A more flexible approach </p>
    <p class="calibre_2">is to write programs that can reload their configuration while they're running. This </p>
    <p class="calibre_2">flexibility comes at a cost: it is more complex to implement. </p>
    <p class="calibre_2">So consider how your application will be used: if it is a long-running server </p>
    <p class="calibre_2">process, you will want to provide some way to reread and apply metadata while </p>
    <p class="calibre_2">the program is running. For a small client GUI application that restarts quickly, </p>
    <p class="calibre_2">you may not need to. </p>
    <p class="calibre_2">This phenomenon is not limited to application code. We've all been annoyed at </p>
    <p class="calibre_2">operating systems that force us to reboot when we install some simple </p>
    <p class="calibre_2">application or change an innocuous parameter. </p>
    <p class="calibre_2">
      <span class="bold">An Example: Enterprise Java Beans</span>
    </p>
    <p class="calibre_2">Enterprise Java Beans (EJB) is a framework for simplifying programming in a distributed, </p>
    <p class="calibre_2">transaction-based environment. We mention it here because EJB illustrates how metadata </p>
    <p class="calibre_2">can be used both to configure applications <span class="italic">and</span> to reduce the complexity of writing code. </p>
    <p class="calibre_2">Suppose you want to create some Java software that will participate in transactions across </p>
    <p class="calibre_2">different machines, between different database vendors, and with different thread and </p>
    <p class="calibre_2">load-balancing models. </p>
    <p class="calibre_2">The good news is, you don't have to worry about all that. You write a <span class="italic">bean—</span> a</p>
    <p class="calibre_2">self-contained object that follows certain conventions—and place it in a <span class="italic">bean container</span></p>
    <p class="calibre_2">that manages much of the low-level detail on your behalf. You can write the code for a </p>
    <p class="calibre_2">bean without including any transaction operations or thread management; EJB uses </p>
    <p class="calibre_2">metadata to specify how transactions should be handled. </p>
    <p class="calibre_2">Thread allocation and load balancing are specified as metadata to the underlying </p>
    <p class="calibre_2">transaction service that the container uses. This separation allows us great flexibility to </p>
    <p class="calibre_2">configure the environment dynamically, at runtime. </p>
    <p class="calibre_2">The bean's container can manage transactions on the bean's behalf in one of several </p>
    <p class="calibre_2">different styles (including an option where you control your own commits and rollbacks). All </p>
    <p class="calibre_2">of the parameters that affect the bean's behavior are specified in the bean's <span class="italic">deployment</span></p>
    <p class="calibre_2"><span class="italic">descriptor—</span> a serialized object that contains the metadata we need. </p>
    <p class="calibre_2">Distributed systems such as EJB are leading the way into a new world of configurable, </p>
    <p class="calibre_2">dynamic systems. </p>
    <p class="calibre_2">
      <span class="bold">Cooperative Configuration</span>
    </p>
    <p class="calibre_2">We've talked about users and developers configuring dynamic applications. But what</p>
    <p class="calibre_2">happens if you let applications configure each other—software that adapts itself to its</p>
    <p class="calibre_2">environment? Unplanned, spur-of-the-moment configuration of existing software is a</p>
    <p class="calibre_2">powerful concept. </p>
    <p class="calibre_2">Operating systems already configure themselves to hardware as they boot, and Web </p>
    <p class="calibre_2">browsers update themselves with new components automatically. </p>
    <p class="calibre_2">Your larger applications probably already have issues with handling different versions of </p>
    <p class="calibre_2">data and different releases of libraries and operating systems. Perhaps a more dynamic </p>
    <p class="calibre_2">approach will help. </p>
    <p class="calibre_2">
      <span class="bold">Don't Write Dodo-Code</span>
    </p>
    <p class="calibre_2">Without metadata, your code is not as adaptable or flexible as it could be. Is this a bad </p>
    <p class="calibre_2">thing? Well, out here in the real world, species that don't adapt die. </p>
    <p class="calibre_2">The dodo didn't adapt to the presence of humans and their livestock on the island of </p>
    <p class="calibre_2">Mauritius, and quickly became extinct. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[2]</span></span></a> It was the first documented extinction of a species</p>
    <p class="calibre_2">at the hand of man. </p>
    <p class="calibre_2">[2] It didn't help that the settlers beat the placid (read <span class="italic">stupid</span>) birds to death with clubs for sport. </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00186.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00331.jpg"/>
    </p>
    <p class="calibre_2">Don't let your project (or your career) go the way of the dodo. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Reversibility</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Domain Languages</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Power of Plain Text</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">For your current project, consider how much of the application might be moved out </p>
    <p class="calibre_2">of the program itself to metadata. What would the resultant "engine" look like? </p>
    <p class="calibre_2">Would you be able to reuse that engine in the context of a different application? </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">28. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Which of the following things would be better represented as code within a </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">program, and which externally as metadata? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">1. Communication port assignments</p>
    <p class="calibre_2">2. An editor's support for highlighting the syntax of various languages</p>
    <p class="calibre_2">3. An editor's support for different graphic devices</p>
    <p class="calibre_2">4. A state machine for a parser or scanner</p>
    <p class="calibre_2">5. Sample values and results for use in unit testing</p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00161.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00319.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Temporal Coupling</span>
    </p>
    <p class="calibre_2">What is <span class="italic">temporal coupling</span> all about, you may ask. It's about time. </p>
    <p class="calibre_2">Time is an often ignored aspect of software architectures. The only time that preoccupies us is the</p>
    <p class="calibre_2">time on the schedule, the time left until we ship—but this is not what we're talking about here. Instead, </p>
    <p class="calibre_2">we are talking about the role of time as a design element of the software itself. There are two aspects</p>
    <p class="calibre_2">of time that are important to us: concurrency (things happening at the same time) and ordering (the</p>
    <p class="calibre_2">relative positions of things in time). </p>
    <p class="calibre_2">We don't usually approach programming with either of these aspects in mind. When people first sit</p>
    <p class="calibre_2">down to design an architecture or write a program, things tend to be linear. That's the way most people</p>
    <p class="calibre_2">think— <span class="italic">do this</span> and then always <span class="italic">do that. </span> But thinking this way leads to <span class="italic">temporal coupling:</span> coupling in </p>
    <p class="calibre_2">time. Method A must always be called before method B; only one report can be run at a time; you </p>
    <p class="calibre_2">must wait for the screen to redraw before the button click is received. Tick must happen before tock. </p>
    <p class="calibre_2">This approach is not very flexible, and not very realistic. </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">We need to allow for concurrency[3] and to think about decoupling any time or order dependencies. I</span></span></a>n</p>
    <p class="calibre_2">doing so, we can gain flexibility and reduce any time-based dependencies in many areas of </p>
    <p class="calibre_2">development: workflow analysis, architecture, design, and deployment. </p>
    <p class="calibre_2">[3] We won't go into the details of concurrent or parallel programming here; a good computer science</p>
    <p class="calibre_2">textbook should cover the basics, including scheduling, deadlock, star-vation, mutual </p>
    <p class="calibre_2">exclusion/semaphores, and so on. </p>
    <p class="calibre_2">
      <span class="bold">Workflow</span>
    </p>
    <p class="calibre_2">On many projects, we need to model and analyze the users' workflows as part of requirements </p>
    <p class="calibre_2">analysis. We'd like to find out what <span class="italic">can</span> happen at the same time, and what must happen in a strict </p>
    <p class="calibre_2">order. One way to do this is to capture their description of workflow using a notation such as the <span class="italic">UML </span></p>
    <p class="calibre_2">
      <span class="italic">activity diagram. </span>
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">[4]</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">[4] For more information on all of the UML diagram types, see <span class="calibre_5"><span class="underline">[FS97]. </span></span></p>
    <p class="calibre_2">An activity diagram consists of a set of actions drawn as rounded boxes. The arrow leaving an action </p>
    <p class="calibre_2">leads to either another action (which can start once the first action completes) or to a thick line called a </p>
    <p class="calibre_2"><span class="italic">synchronization bar. </span> Once <span class="italic">all</span> the actions leading into a synchronization bar are complete, you can </p>
    <p class="calibre_2">then proceed along any arrows leaving the bar. An action with no arrows leading into it can be started </p>
    <p class="calibre_2">at any time. </p>
    <p class="calibre_2">You can use activity diagrams to maximize parallelism by identifying activities that <span class="italic">could be</span> performed </p>
    <p class="calibre_2">in parallel, but aren't. </p>
    <p class="calibre_2">
      <span class="bold">Tip 39</span>
    </p>
    <p class="calibre_2">Analyze Workflow to Improve Concurrency</p>
    <p class="calibre_2">For instance, in our blender project (Exercise 17, page 119), users may initially describe their current </p>
    <p class="calibre_2">workflow as follows. </p>
    <p class="calibre_2">1. Open blender</p>
    <p class="calibre_2">2. Open piña colada mix</p>
    <p class="calibre_2">3. Put mix in blender</p>
    <p class="calibre_2">4. Measure 1/2 cup white rum</p>
    <p class="calibre_2">5. Pour in rum</p>
    <p class="calibre_2">6. Add 2 cups of ice</p>
    <p class="calibre_2">7. Close blender</p>
    <p class="calibre_2">8. Liquefy for 2 minutes</p>
    <p class="calibre_2">9. Open blender</p>
    <p class="calibre_2">10. Get glasses</p>
    <p class="calibre_2">11. Get pink umbrellas</p>
    <p class="calibre_2">12. Serve</p>
    <p class="calibre_2">Even though they describe these actions serially, and may even perform them serially, we notice that </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">many of them could be performed in parallel, as we show in the activity diagram in Figure 5.2</span></span></a> on the </p>
    <p class="calibre_2">next page. </p>
    <p class="calibre_2">
      <span class="bold">Figure 5.2. UML activity diagram: making a piña colada</span>
    </p>
    <p class="calibre_2">
      <img class="calibre_25" src="images/00153.jpg"/>
    </p>
    <p class="calibre_2">It can be eye-opening to see where the dependencies really exist. In this instance, the top-level tasks </p>
    <p class="calibre_2">(1, 2, 4, 10, and 11) can all happen concurrently, up front. Tasks 3, 5, and 6 can happen in parallel </p>
    <p class="calibre_2">later. </p>
    <p class="calibre_2">If you were in a piña colada-making contest, these optimizations may make all the difference. </p>
    <p class="calibre_2">
      <span class="bold">Architecture</span>
    </p>
    <p class="calibre_2">We wrote an On-Line Transaction Processing (OLTP) system a few years ago. At its simplest, all the </p>
    <p class="calibre_2">system had to do was read a request and process the transaction against the database. But we wrote </p>
    <p class="calibre_2">a three-tier, multiprocessing distributed application: each component was an independent entity that </p>
    <p class="calibre_2">ran concurrently with all other components. While this sounds like more work, it wasn't: taking </p>
    <p class="calibre_2">advantage of temporal decoupling made it <span class="italic">easier</span> to write. Let's take a closer look at this project. </p>
    <p class="calibre_2">The system takes in requests from a large number of data communication lines and processes </p>
    <p class="calibre_2">transactions against a back-end database. </p>
    <p class="calibre_2">The design addresses the following constraints:</p>
    <p class="calibre_2">Database operations take a relatively long time to complete. </p>
    <p class="calibre_2">
      <img class="calibre_26" src="images/00276.jpg"/>
    </p>
    <p class="calibre_2">For each transaction, we must not block communication services while a database transaction </p>
    <p class="calibre_2">is being processed. </p>
    <p class="calibre_2">Database performance suffers with too many concurrent sessions. </p>
    <p class="calibre_2">Multiple transactions are in progress concurrently on each data line. </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The solution that gave us the best performance and cleanest architecture looked something like Figure </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">5.3. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Figure 5.3. OLTP architecture overview</span>
    </p>
    <p class="calibre_2">Each box represents a separate process; processes communicate via work queues. Each input </p>
    <p class="calibre_2">process monitors one incoming communication line, and makes requests to the application server. All </p>
    <p class="calibre_2">requests are asynchronous: as soon as the input process makes its current request, it goes back to </p>
    <p class="calibre_2">monitoring the line for more traffic. Similarly, the application server makes requests of the database </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">process,[5] and is notified when the individual transaction is complete</span></span></a>. </p>
    <p class="calibre_2">[5] Even though we show the database as a single, monolithic entity, it is not. The database software is</p>
    <p class="calibre_2">partitioned into several processes and client threads, but this is handled internally by the database </p>
    <p class="calibre_2">software and isn't part of our example. </p>
    <p class="calibre_2">This example also shows a way to get quick and dirty load balancing among multiple consumer </p>
    <p class="calibre_2">processes: the <span class="italic">hungry consumer</span> model. </p>
    <p class="calibre_2">In a hungry consumer model, you replace the central scheduler with a number of independent </p>
    <p class="calibre_2">consumer tasks and a centralized work queue. Each consumer task grabs a piece from the work </p>
    <p class="calibre_2">queue and goes on about the business of processing it. As each task finishes its work, it goes back to </p>
    <p class="calibre_2">the queue for some more. This way, if any particular task gets bogged down, the others can pick up </p>
    <p class="calibre_2">the slack, and each individual component can proceed at its own pace. Each component is temporally </p>
    <p class="calibre_2">decoupled from the others. </p>
    <p class="calibre_2">
      <span class="bold">Tip 40</span>
    </p>
    <p class="calibre_2">Design Using Services</p>
    <p class="calibre_2">Instead of components, we have really created <span class="italic">services—</span> independent, concurrent objects behind </p>
    <p class="calibre_2">well-defined, consistent interfaces. </p>
    <p class="calibre_2">
      <span class="bold">Design for Concurrency</span>
    </p>
    <p class="calibre_2">The rising acceptance of Java as a platform has exposed more developers to multithreaded</p>
    <p class="calibre_2">programming. But programming with threads imposes some design constraints—and that's a good</p>
    <p class="calibre_2">thing. Those constraints are actually so helpful that we want to abide by them whenever we program. </p>
    <p class="calibre_2">It will help us decouple our code and fight <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">programming by coincidence. </span></span></a></p>
    <p class="calibre_2">With linear code, it's easy to make assumptions that lead to sloppy programming. But concurrency</p>
    <p class="calibre_2">forces you to think through things a bit more carefully—you're not alone at the party anymore. </p>
    <p class="calibre_2">Because things can now happen at the "same time," you may suddenly see some time-based</p>
    <p class="calibre_2">dependencies. </p>
    <p class="calibre_2">To begin with, any global or static variables must be protected from concurrent access. Now may be a </p>
    <p class="calibre_2">good time to ask yourself <span class="italic">why</span> you need a global variable in the first place. In addition, you need to </p>
    <p class="calibre_2">make sure that you present consistent state information, regardless of the order of calls. For example, </p>
    <p class="calibre_2">when is it valid to query the state of your object? If your object is in an invalid state between certain </p>
    <p class="calibre_2">calls, you may be relying on a coincidence that no one can call your object at that point in time. </p>
    <p class="calibre_2">Suppose you have a windowing subsystem where the widgets are first created and then shown on the </p>
    <p class="calibre_2">display in two separate steps. You aren't allowed to set state in the widget until it is shown. Depending </p>
    <p class="calibre_2">on how the code is set up, you may be relying on the fact that no other object can use the created </p>
    <p class="calibre_2">widget until you've shown it on the screen. </p>
    <p class="calibre_2">But this may not be true in a concurrent system. Objects must always be in a valid state when called, </p>
    <p class="calibre_2">and they can be called at the most awkward times. You must ensure that an object is in a valid state </p>
    <p class="calibre_2"><span class="italic">any time</span> it could possibly be called. Often this problem shows up with classes that define separate </p>
    <p class="calibre_2">constructor and initialization routines (where the constructor doesn't leave the object in an initialized </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">state). Using class invariants, discussed in Design by Contract</span></span></a>, will help you avoid this trap. </p>
    <p class="calibre_2">
      <span class="bold">Cleaner Interfaces</span>
    </p>
    <p class="calibre_2">Thinking about concurrency and time-ordered dependencies can lead you to design cleaner interfaces </p>
    <p class="calibre_2">as well. Consider the C library routine strtok, which breaks a string into tokens. </p>
    <p class="calibre_2">The design of strtok isn't thread safe, <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[6]</span></span></a> but that isn't the worst part: look at the time dependency. You</p>
    <p class="calibre_2">must make the first call to strtok with the variable you want to parse, and all successive calls with a </p>
    <p class="calibre_2">NULL instead. If you pass in a non-NULL value, it restarts the parse on that buffer instead. Without </p>
    <p class="calibre_2">even considering threads, suppose you wanted to use strtok to parse two separate strings at the same </p>
    <p class="calibre_2">time:</p>
    <p class="calibre_2">[6] It uses static data to maintain the current position in the buffer. The static data isn't protected against</p>
    <p class="calibre_2">concurrent access, so it isn't thread safe. In addition, it clobbers the first argument you pass in, which can</p>
    <p class="calibre_2">lead to some nasty surprises. </p>
    <p class="calibre_2"><span class="bold"> char</span> buf1[BUFSIZ]; </p>
    <p class="calibre_2"><span class="bold"> char</span> buf2[BUFSIZ]; </p>
    <p class="calibre_2"><span class="bold"> char</span> *p, *q; </p>
    <p class="calibre_2">strcpy(buf1, " <span class="italic">this is a test</span>"); </p>
    <p class="calibre_2">strcpy(buf2, " <span class="italic">this ain't gonna work</span>"); </p>
    <p class="calibre_2">p = strtok(buf1, " "); </p>
    <p class="calibre_2">q = strtok(buf2, " "); </p>
    <p class="calibre_2"><span class="bold"> while</span> (p &amp;&amp; q) {</p>
    <p class="calibre_2">printf( <span class="italic">"%s %s</span>\ <span class="italic">n", </span> p, q); </p>
    <p class="calibre_2">p = strtok(NULL, " "); </p>
    <p class="calibre_2">q = strtok(NULL, " "); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">The code as shown will not work: there is implicit state retained in strtok between calls. You have to </p>
    <p class="calibre_2">use strtok on just one buffer at a time. </p>
    <p class="calibre_2">Now in Java, the design of a string parser has to be different. It must be thread safe and present a </p>
    <p class="calibre_2">consistent state. </p>
    <p class="calibre_2">StringTokenizer st1 = <span class="bold">new</span> StringTokenizer(" <span class="italic">this is a test</span>"); </p>
    <p class="calibre_2">StringTokenizer st2 = <span class="bold">new</span> StringTokenizer(" <span class="italic">this test will work</span>"); </p>
    <p class="calibre_2"><span class="bold">while</span> (st1.hasMoreTokens() &amp;&amp; st2 hasMoreTokens()) {</p>
    <p class="calibre_2">System.out.println(st1.nextToken()); </p>
    <p class="calibre_2">System.out.println(st2.nextToken()); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">StringTokenizer is a much cleaner, more maintainable, interface. It contains no surprises, and won't </p>
    <p class="calibre_2">cause mysterious bugs in the future, as strtok might. </p>
    <p class="calibre_2">
      <span class="bold">Tip 41</span>
    </p>
    <p class="calibre_2">Always Design for Concurrency</p>
    <p class="calibre_2">
      <span class="bold">Deployment</span>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00070.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00134.jpg"/>
    </p>
    <p class="calibre_2">Once you've designed an architecture with an element of concurrency, it becomes easier to think </p>
    <p class="calibre_2">about handling <span class="italic">many</span> concurrent services: the model becomes pervasive. </p>
    <p class="calibre_2">Now you can be flexible as to how the application is deployed: standalone, client-server, or <span class="italic">n</span>-tier. By</p>
    <p class="calibre_2">architecting your system as independent services, you can make the configuration dynamic as well. By</p>
    <p class="calibre_2">planning for concurrency, and decoupling operations in time, you have all these options—including the</p>
    <p class="calibre_2">stand-alone option, where you can choose <span class="italic">not</span> to be concurrent. </p>
    <p class="calibre_2">Going the other way (trying to add concurrency to a nonconcurrent application) is <span class="italic">much</span> harder. If we</p>
    <p class="calibre_2">design to allow for concurrency, we can more easily meet scalability or performance requirements</p>
    <p class="calibre_2">when the time comes—and if the time never comes, we still have the benefit of a cleaner design. </p>
    <p class="calibre_2">Isn't it about time? </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design by Contract</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Programming by Coincidence</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">How many tasks do you perform in parallel when you get ready for work in the morning? </p>
    <p class="calibre_2">Could you express this in a UML activity diagram? Can you find some way to get ready more </p>
    <p class="calibre_2">quickly by increasing concurrency? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00225.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00324.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">It's Just a View</span>
    </p>
    <p class="calibre_2">
      <span class="italic">Still, a man hears</span>
    </p>
    <p class="calibre_2">
      <span class="italic">What he wants to hear</span>
    </p>
    <p class="calibre_2">
      <span class="italic">And disregards the rest</span>
    </p>
    <p class="calibre_2">
      <span class="italic">La la la…</span>
    </p>
    <p class="calibre_2">
      <span class="bold">Simon and Garfunkel, "The Boxer" </span>
    </p>
    <p class="calibre_2">Early on we are taught not to write a program as a single big chunk, but that we should "divide and </p>
    <p class="calibre_2">conquer" and separate a program into modules. Each module has its own responsibilities; in fact, a </p>
    <p class="calibre_2">good definition of a module (or class) is that it has a single, well-defined responsibility. </p>
    <p class="calibre_2">But once you separate a program into different modules based on responsibility, you have a new</p>
    <p class="calibre_2">problem. At runtime, how do the objects talk to each other? How do you manage the logical</p>
    <p class="calibre_2">dependencies between them? That is, how do you synchronize changes in state (or updates to data</p>
    <p class="calibre_2">values) in these different objects? It needs to be done in a clean, flexible manner—we don't want them</p>
    <p class="calibre_2">to know too much about each other. We want each module to be like the man in the song and just</p>
    <p class="calibre_2">hear what it wants to hear. </p>
    <p class="calibre_2">We'll start off with the concept of an <span class="italic">event</span>. An event is simply a special message that says "something </p>
    <p class="calibre_2">interesting just happened" (interesting, of course, lies in the eye of the beholder). We can use events </p>
    <p class="calibre_2">to signal changes in one object that some other object may be interested in. </p>
    <p class="calibre_2">Using events in this way minimizes coupling between those objects—the sender of the event doesn't</p>
    <p class="calibre_2">need to have any explicit knowledge of the receiver. In fact, there could be multiple receivers, each</p>
    <p class="calibre_2">one focused on its own agenda (of which the sender is blissfully unaware). </p>
    <p class="calibre_2">We need to exercise some care in using events, however. In an early version of Java, for example, </p>
    <p class="calibre_2">one routine received <span class="italic">all</span> the events destined for a particular application. Not exactly the road to easy </p>
    <p class="calibre_2">maintenance or evolution. </p>
    <p class="calibre_2">
      <span class="bold">Publish/Subscribe</span>
    </p>
    <p class="calibre_2">Why is it bad to push all the events through a single routine? It violates object encapsulation—that one</p>
    <p class="calibre_2">routine now has to have intimate knowledge of the interactions among many objects. It also increases</p>
    <p class="calibre_2">the coupling—and we're trying to <span class="italic">decrease</span> coupling. Because the objects themselves have to have </p>
    <p class="calibre_2">knowledge of these events as well, you are probably going to violate the <span class="italic">DRY</span> principle, orthogonality, </p>
    <p class="calibre_2">and perhaps even sections of the Geneva Convention. You may have seen this kind of code—it is</p>
    <p class="calibre_2">
      <img class="calibre_27" src="images/00215.jpg"/>
    </p>
    <p class="calibre_2">usually dominated by a huge case statement or multiway if-then. We can do better. </p>
    <p class="calibre_2">Objects should be able to register to receive only the events they need, and should never be sent </p>
    <p class="calibre_2">events they don't need. We don't want to spam our objects! Instead, we can use a <span class="italic">publish/subscribe</span></p>
    <p class="calibre_2">protocol, illustrated using the <span class="italic">UML sequence diagram</span><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline"> in Figure 5.4 on the next page.[7]</span></span></a></p>
    <p class="calibre_2">[7] See also the Observer pattern in <span class="calibre_5"><span class="underline">[GHJV95</span></span>] for more information. </p>
    <p class="calibre_2">
      <span class="bold">Figure 5.4. Publish/subscribe protocol</span>
    </p>
    <p class="calibre_2">A sequence diagram shows the flow of messages among several objects, with objects arranged in </p>
    <p class="calibre_2">columns. Each message is shown as a labeled arrow from the sender's column to the receiver's </p>
    <p class="calibre_2">column. An asterisk in the label means that more than one message of this type can be sent. </p>
    <p class="calibre_2">If we are interested in certain events generated by a Publisher, all we have to do is register ourselves. </p>
    <p class="calibre_2">The Publisher keeps track of all interested Subscriber objects; when the Publisher generates an event </p>
    <p class="calibre_2">of interest, it will call each Subscriber in turn and notify them that the event has occurred. </p>
    <p class="calibre_2">There are several variations on this theme—mirroring other communication styles. Objects may use</p>
    <p class="calibre_2">publish/subscribe on a peer-to-peer basis (as we saw above); they may use a "software bus" where a</p>
    <p class="calibre_2">centralized object maintains the database of listeners and dispatches messages appropriately. You</p>
    <p class="calibre_2">might even have a scheme where critical events get broadcast to all listeners—registered or not. One</p>
    <p class="calibre_2">possible implementation of events in a distributed environment is illustrated by the CORBA Event</p>
    <p class="calibre_2">Service, described in the box on the following page. </p>
    <p class="calibre_2">We can use this publish/subscribe mechanism to implement a very important design concept: the </p>
    <p class="calibre_2">separation of a model from views of the model. Let's start with a GUI-based example, using the </p>
    <p class="calibre_2">Smalltalk design in which this concept was born. </p>
    <p class="calibre_2">
      <span class="bold">Model-View-Controller</span>
    </p>
    <p class="calibre_2">Suppose you have a spreadsheet application. In addition to the numbers in the spreadsheet itself, you </p>
    <p class="calibre_2">also have a graph that displays the numbers as a bar chart and a running total dialog box that shows </p>
    <p class="calibre_2">the sum of a column in the spreadsheet. </p>
    <p class="calibre_2">
      <span class="bold">The CORBA Event Service</span>
    </p>
    <p class="calibre_2">The CORBA Event Service allows participating objects to send and receive </p>
    <p class="calibre_2">event notifications via a common bus, the <span class="italic">event channel. </span> The event channel </p>
    <p class="calibre_2">arbitrates event handling, and also decouples event producers from event </p>
    <p class="calibre_2">consumers. It works in two basic ways: <span class="italic">push</span> and <span class="italic">pull. </span></p>
    <p class="calibre_2">In push mode, event suppliers inform the event channel that an event has </p>
    <p class="calibre_2">occurred. The channel then automatically distributes that event to all client </p>
    <p class="calibre_2">objects that have registered interest. </p>
    <p class="calibre_2">In pull mode, clients periodically poll the event channel, which in turn polls the </p>
    <p class="calibre_2">supplier that offers event data corresponding to the request. </p>
    <p class="calibre_2">Although the CORBA Event Service can be used to implement all of the event </p>
    <p class="calibre_2">models discussed in this section, you can also view it as a different animal. </p>
    <p class="calibre_2">CORBA facilities communication among objects written in different programming </p>
    <p class="calibre_2">languages running on geographically dispersed machines with different </p>
    <p class="calibre_2">architectures. Sitting on top of CORBA, the event service give you a decoupled </p>
    <p class="calibre_2">way of interacting with applications around the world, written by people you've </p>
    <p class="calibre_2">never met, using programming languages you'd rather not know about. </p>
    <p class="calibre_2">Obviously, we don't want to have three separate copies of the data. So we create a <span class="italic">model—</span> the data </p>
    <p class="calibre_2">itself, with common operations to manipulate it. Then we can create separate <span class="italic">views</span> that display the </p>
    <p class="calibre_2">data in different ways: as a spreadsheet, as a graph, or in a totals box. Each of these views may have </p>
    <p class="calibre_2">its own <span class="italic">controller. </span> The graph view may have a controller that allows you to zoom in or out, or pan </p>
    <p class="calibre_2">around the data, for example. None of this affects the data itself, just that view. </p>
    <p class="calibre_2">This is the key concept behind the Model-View-Controller (MVC0 idiom: separating the model from </p>
    <p class="calibre_2">both the GUI that represents it and the controls that manage the view. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[8]</span></span></a></p>
    <p class="calibre_2">[8] The view and controller are tightly coupled, and in some Implementations of MVC the view and</p>
    <p class="calibre_2">controller are a single component. </p>
    <p class="calibre_2">By doing so, you can take advantage of some interesting possibilities. You can support multiple views </p>
    <p class="calibre_2">of the same data model. You can use common viewers on many different data models. You can even </p>
    <p class="calibre_2">support multiple controllers to provide nontraditional input mechanisms. </p>
    <p class="calibre_2">
      <span class="bold">Tip 42</span>
    </p>
    <p class="calibre_2">Separate Views from Models</p>
    <p class="calibre_2">By loosening the coupling between the model and the view/controller, you buy yourself a lot of </p>
    <p class="calibre_2">flexibility at low cost. In fact, this technique is one of the most important ways of maintaining </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">reversibility (see Reversibility). </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Java Tree View</span>
    </p>
    <p class="calibre_2">A good example of an MVC design can be found in the Java tree widget. The tree widget (which </p>
    <p class="calibre_2">displays a clickable, traversable tree) is actually a set of several different classes organized in an MVC </p>
    <p class="calibre_2">pattern. </p>
    <p class="calibre_2">To produce a fully functional tree widget, all you need to do is provide a data source that conforms to </p>
    <p class="calibre_2">the TreeModel interface. Your code now becomes the model for the tree. </p>
    <p class="calibre_2">The view is created by the TreeCellRenderer and TreeCellEditor classes, which can be inherited from </p>
    <p class="calibre_2">and customized to provide different colors, fonts, and icons in the widget. JTree acts as the controller </p>
    <p class="calibre_2">for the tree widget and provides some general viewing functionality. </p>
    <p class="calibre_2">Because we have decoupled the model from the view, we simplify the programming a great deal. You </p>
    <p class="calibre_2">don't have to think about programming a tree widget anymore. Instead, you just provide a data source. </p>
    <p class="calibre_2">Suppose the vice president comes up to you and wants a quick application that lets her navigate the </p>
    <p class="calibre_2">company's organizational chart, which is held in a legacy database on the mainframe. Just write a </p>
    <p class="calibre_2">wrapper that takes the mainframe data, presents it as a TreeModel, and <span class="italic">voilà:</span> you have a fully </p>
    <p class="calibre_2">navigable tree widget. </p>
    <p class="calibre_2">Now you can get fancy and start using the viewer classes; you can change how nodes are rendered, </p>
    <p class="calibre_2">and use special icons, fonts, or colors. When the VP comes back and says the new corporate </p>
    <p class="calibre_2">standards dictate the use of a Skull and Crossbones icon for certain employees, you can make the </p>
    <p class="calibre_2">changes to TreeCellRenderer without touching any other code. </p>
    <p class="calibre_2">
      <span class="bold">Beyond GUIs</span>
    </p>
    <p class="calibre_2">While MVC is typically taught in the context of GUI development, it is really a general-purpose</p>
    <p class="calibre_2">programming technique. The view is an interpretation of the model (perhaps a subset)—it doesn't</p>
    <p class="calibre_2">need to be graphical. The controller is more of a coordination mechanism, and doesn't have to be</p>
    <p class="calibre_2">related to any sort of input device. </p>
    <p class="calibre_2"><span class="bold">Model. </span> The abstract data model representing the target object. The model has no direct</p>
    <p class="calibre_2">knowledge of any views or controllers. </p>
    <p class="calibre_2"><span class="bold">View. </span> A way to interpret the model. It subscribes to changes in the model and logical events</p>
    <p class="calibre_2">from the controller. </p>
    <p class="calibre_2"><span class="bold">Controller. </span> A way to control the view and provide the model with new data. It publishes</p>
    <p class="calibre_2">events to both the model and the view. </p>
    <p class="calibre_2">Let's look at a nongraphical example. </p>
    <p class="calibre_2">Baseball is a unique institution. Where else can you learn such gems of trivia as "this has become the </p>
    <p class="calibre_2">highest-scoring game played on a Tuesday, in the rain, under artificial lights, between teams whose </p>
    <p class="calibre_2">names start with a vowel?" Suppose we were charged with developing software to support those </p>
    <p class="calibre_2">intrepid announcers who must dutifully report on the scores, the statistics, and the trivia. </p>
    <p class="calibre_2">Clearly we need information on the game in progress—the teams playing, the conditions, the player at</p>
    <p class="calibre_2">bat, the score, and so on. These facts form our models; they will be updated as new information</p>
    <p class="calibre_2">arrives (a pitcher is changed, a player strikes out, it starts raining…). </p>
    <p class="calibre_2">We'll then have a number of view objects that use these models. One view might look for runs so it </p>
    <p class="calibre_2">can update the current score. Another may receive notifications of new batters, and retrieve a brief </p>
    <p class="calibre_2">summary of their year-to-date statistics. A third viewer may look at the data and check for new world </p>
    <p class="calibre_2">records. We might even have a trivia viewer, responsible for coming up with those weird and useless </p>
    <p class="calibre_2">facts that thrill the viewing public. </p>
    <p class="calibre_2">But we don't want to flood the poor announcer with all of these views directly. Instead, we'll have each </p>
    <p class="calibre_2">view generate notifications of "interesting" events, and let some higher-level object schedule what gets </p>
    <p class="calibre_2">shown. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[9]</span></span></a></p>
    <p class="calibre_2">[9] The fact that a plane flies overhead probably isn't interesting unless it's the 100th plane to fly overhead</p>
    <p class="calibre_2">that night. </p>
    <p class="calibre_2">These viewer objects have suddenly become models for the higher-level object, which itself might </p>
    <p class="calibre_2">then be a model for different formatting viewers. One formatting viewer might create the teleprompter </p>
    <p class="calibre_2">script for the announcer, another might generate video captions directly on the satellite uplink, another </p>
    <p class="calibre_2">might update the network's or team's Web pages (see <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Figure 5.5). </span></span></a></p>
    <p class="calibre_2">
      <img class="calibre_28" src="images/00144.jpg"/>
    </p>
    <p class="calibre_2">
      <span class="bold">Figure 5.5. Baseball reporting, Viewers subscribe to models. </span>
    </p>
    <p class="calibre_2">This kind of model-viewer network is a common (and valuable) design technique. Each link decouples</p>
    <p class="calibre_2">raw data from the events that created it—each new viewer is an abstraction. And because the</p>
    <p class="calibre_2">relationships are a network (not just a linear chain), we have a lot of flexibility. Each model may have</p>
    <p class="calibre_2"><span class="italic">many</span> viewers, and one viewer may work with multiple models. </p>
    <p class="calibre_2">In advanced systems such as this one, it can be handy to have <span class="italic">debugging views—</span> specialized views </p>
    <p class="calibre_2">that show you in-depth details of the model. Adding a facility to trace individual events can be a great </p>
    <p class="calibre_2">time saver as well. </p>
    <p class="calibre_2">
      <span class="bold">Still Coupled (After All These Years)</span>
    </p>
    <p class="calibre_2">Despite the decrease in coupling we have achieved, listeners and event generators (subscribers and </p>
    <p class="calibre_2">publishers) still have <span class="italic">some</span> knowledge of each other. In Java, for instance, they must agree on </p>
    <p class="calibre_2">common interface definitions and calling conventions. </p>
    <p class="calibre_2">In the next section, we'll look at ways of reducing coupling even further by using a form of publish and </p>
    <p class="calibre_2">subscribe where <span class="italic">none</span> of the participants need know about each other, or call each other directly. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00015.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00273.jpg"/>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Reversibility</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Decoupling and the Law of Demeter</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Blackboards</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">It's All Writing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">29. </span>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Suppose you have an airline reservation system that includes the concept of a flight</span></span></a>:</p>
    <p class="calibre_2"><span class="bold">public interface</span> Flight {</p>
    <p class="calibre_2">// <span class="italic">Return false if flight full. </span></p>
    <p class="calibre_2"><span class="bold"> public boolean</span> addPassenger(Passenger p); </p>
    <p class="calibre_2"><span class="bold"> public void</span> addToWaitList(Passenger p); </p>
    <p class="calibre_2"><span class="bold"> public int</span> getFlightCapacity(); </p>
    <p class="calibre_2"><span class="bold"> public int</span> getNumPassengers(); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">If you add a passenger to the wait list, they'll be put on the flight automatically when an </p>
    <p class="calibre_2">opening becomes available. </p>
    <p class="calibre_2">There's a massive reporting job that goes through looking for overbooked or full flights to </p>
    <p class="calibre_2">suggest when additional flights might be scheduled. It works fine, but it takes hours to </p>
    <p class="calibre_2">run. </p>
    <p class="calibre_2">We'd like to have a little more flexibility in processing wait-list passengers, and we've got</p>
    <p class="calibre_2">to do something about that big report—it takes too long to run. Use the ideas from this</p>
    <p class="calibre_2">section to redesign this interface. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00261.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00222.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_29" src="images/00169.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Blackboards</span>
    </p>
    <p class="calibre_2">
      <span class="italic">The writing is on the wall…</span>
    </p>
    <p class="calibre_2">You may not usually associate <span class="italic">elegance</span> with police detectives, picturing instead some sort of </p>
    <p class="calibre_2">doughnut and coffee cliché. But consider how detectives might use a <span class="italic">blackboard</span> to coordinate and </p>
    <p class="calibre_2">solve a murder investigation. </p>
    <p class="calibre_2">Suppose the chief inspector starts off by setting up a large blackboard in the conference room. On it, </p>
    <p class="calibre_2">he writes a single question:</p>
    <p class="calibre_2">H. DUMPTY (MALE, EGG): ACCIDENT OR MURDER? </p>
    <p class="calibre_2">Did Humpty really fall, or was he pushed? Each detective may make contributions to this potential </p>
    <p class="calibre_2">murder mystery by adding facts, statements from witnesses, any forensic evidence that might arise, </p>
    <p class="calibre_2">and so on. As the data accumulates, a detective might notice a connection and post that observation </p>
    <p class="calibre_2">or speculation as well. This process continues, across all shifts, with many different people and </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">agents, until the case is closed. A sample blackboard is shown in Figure 5.6 on the next page. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Figure 5.6. Someone found a connection between Humpty's gambling debts and the phone logs. Perhaps he </span>
    </p>
    <p class="calibre_2">
      <span class="bold">was getting threatening phone calls. </span>
    </p>
    <p class="calibre_2">Some key features of the blackboard approach are:</p>
    <p class="calibre_2">None of the detectives needs to know of the existence of any other detective—they watch the</p>
    <p class="calibre_2">board for new information, and add their findings. </p>
    <p class="calibre_2">The detectives may be trained in different disciplines, may have different levels of education </p>
    <p class="calibre_2">and expertise, and may not even work in the same precinct. They share a desire to solve the </p>
    <p class="calibre_2">case, but that's all. </p>
    <p class="calibre_2">Different detectives may come and go during the course of the process, and may work </p>
    <p class="calibre_2">different shifts. </p>
    <p class="calibre_2">There are no restrictions on what may be placed on the blackboard. It may be pictures, </p>
    <p class="calibre_2">sentences, physical evidence, and so on. </p>
    <p class="calibre_2">We've worked on a number of projects that involved a workflow or distributed data gathering process. </p>
    <p class="calibre_2">With each, designing a solution around a simple blackboard model gave us a solid metaphor to work </p>
    <p class="calibre_2">with: all of the features listed above using detectives are just as applicable to objects and code </p>
    <p class="calibre_2">modules. </p>
    <p class="calibre_2">A blackboard system lets us decouple our objects from each other completely, providing a forum </p>
    <p class="calibre_2">where knowledge consumers and producers can exchange data anonymously and asynchronously. </p>
    <p class="calibre_2">As you might guess, it also cuts down on the amount of code we have to write. </p>
    <p class="calibre_2">
      <span class="bold">Blackboard Implementations</span>
    </p>
    <p class="calibre_2">Computer-based blackboard systems were originally invented for use in artificial intelligence</p>
    <p class="calibre_2">applications where the problems to be solved were large and complex—speech recognition, </p>
    <p class="calibre_2">knowledge-based reasoning systems, and so on. </p>
    <p class="calibre_2">Modern distributed blackboard-like systems such as JavaSpaces and T Spaces [<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 50, </span></span></a><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 25] are </span></span></a></p>
    <p class="calibre_2">based on a model of key/value pairs first popularized in Linda [<span class="calibre_5"><span class="underline">CG90], where the concept was known </span></span></p>
    <p class="calibre_2">as <span class="italic">tuple space. </span></p>
    <p class="calibre_2">With these systems, you can store active Java objects—not just data—on the blackboard, and retrieve</p>
    <p class="calibre_2">them by partial matching of fields (via templates and wildcards) or by subtypes. For example, suppose</p>
    <p class="calibre_2">you had a type Author, which is a subtype of Person. You could search a blackboard containing </p>
    <p class="calibre_2">Person objects by using an Author template with a lastName value of "Shakespeare." You'd get Bill </p>
    <p class="calibre_2">Shakespeare the author, but not Fred Shakespeare the gardener. </p>
    <p class="calibre_2">The main operations in JavaSpaces are:</p>
    <p class="calibre_2">
      <span class="bold">Name</span>
    </p>
    <p class="calibre_2">
      <span class="bold">Function</span>
    </p>
    <p class="calibre_2">
      <span class="bold">read</span>
    </p>
    <p class="calibre_2">Search for and retrieve data from the space. </p>
    <p class="calibre_2">
      <span class="bold">write</span>
    </p>
    <p class="calibre_2">Put an item into the space. </p>
    <p class="calibre_2">
      <span class="bold">take</span>
    </p>
    <p class="calibre_2">Similar to read, but removes the item from the space as well. </p>
    <p class="calibre_2"><span class="bold">notify </span>Set up a notification to occur whenever an object is written that matches the template. </p>
    <p class="calibre_2">T Spaces supports a similar set of operations, but with different names and slightly different semantics. </p>
    <p class="calibre_2">Both systems are built like a database product; they provide atomic operations and distributed </p>
    <p class="calibre_2">transactions to ensure data integrity. </p>
    <p class="calibre_2">Since we can store objects, we can use a blackboard to design algorithms based on a <span class="italic">flow of objects, </span></p>
    <p class="calibre_2">not just data. It's as if our detectives could pin people to the blackboard—witnesses themselves, not</p>
    <p class="calibre_2">just their statements. Anyone can ask a witness questions in the pursuit of the case, post the</p>
    <p class="calibre_2">transcript, and move that witness to another area of the blackboard, where he might respond</p>
    <p class="calibre_2">differently (if you allow the witness to read the blackboard too). </p>
    <p class="calibre_2">A big advantage of systems such as these is that you have a single, consistent interface to the </p>
    <p class="calibre_2">blackboard. When building a conventional distributed application, you can spend a great deal of time </p>
    <p class="calibre_2">crafting unique API calls for every distributed transaction and interaction in the system. With the </p>
    <p class="calibre_2">combinatorial explosion of interfaces and interactions, the project can quickly become a nightmare. </p>
    <p class="calibre_2">
      <span class="bold">Organizing Your Blackboard</span>
    </p>
    <p class="calibre_2">When the detectives work on large cases, the blackboard may be- come </p>
    <p class="calibre_2">cluttered, and it may become difficult to locate data on the board. The solution is </p>
    <p class="calibre_2">to <span class="italic">partition</span> the blackboard and start to organize the data on the blackboard </p>
    <p class="calibre_2">somehow. </p>
    <p class="calibre_2">Different software systems handle this partitioning in different ways; some use </p>
    <p class="calibre_2">fairly flat <span class="italic">zones</span> or <span class="italic">interests groups, </span> while others adopt a more hierarchical </p>
    <p class="calibre_2">treelike structure. </p>
    <p class="calibre_2">The blackboard style of programming removes the need for so many interfaces, making for a more </p>
    <p class="calibre_2">elegant and consistent system. </p>
    <p class="calibre_2">
      <span class="bold">Application Example</span>
    </p>
    <p class="calibre_2">Suppose we are writing a program to accept and process mortgage or loan applications. The laws that</p>
    <p class="calibre_2">govern this area are odiously complex, with federal, state, and local governments all having their say. </p>
    <p class="calibre_2">The lender must prove they have disclosed certain things, and must ask for certain information—but</p>
    <p class="calibre_2">must <span class="italic">not</span> ask certain other questions, and so on, and so on. </p>
    <p class="calibre_2">Beyond the miasma of applicable law, we also have the following problems to contend with. </p>
    <p class="calibre_2">There is no guarantee on the order in which data arrives. For instance, queries for a credit </p>
    <p class="calibre_2">check or title search may take a substantial amount of time, while items such as name and </p>
    <p class="calibre_2">address may be available immediately. </p>
    <p class="calibre_2">Data gathering may be done by different people, distributed across different offices, in </p>
    <p class="calibre_2">different time zones. </p>
    <p class="calibre_2">Some data gathering may be done automatically by other systems. This data may arrive </p>
    <p class="calibre_2">asynchronously as well. </p>
    <p class="calibre_2">Nonetheless, certain data may still be dependent on other data. For instance, you may not be </p>
    <p class="calibre_2">able to start the title search for a car until you get proof of ownership or insurance. </p>
    <p class="calibre_2">Arrival of new data may raise new questions and policies. Suppose the credit check comes </p>
    <p class="calibre_2">back with a less than glowing report; now you need these five extra forms and perhaps a </p>
    <p class="calibre_2">blood sample. </p>
    <p class="calibre_2">You can try to handle every possible combination and circumstance using a workflow system. Many </p>
    <p class="calibre_2">such systems exist, but they can be complex and programmer intensive. As regulations change, the </p>
    <p class="calibre_2">work-flow must be reorganized: people may have to change their procedures and hard-wired code </p>
    <p class="calibre_2">may have to be rewritten. </p>
    <p class="calibre_2">A blackboard, in combination with a rules engine that encapsulates the legal requirements, is an </p>
    <p class="calibre_2">elegant solution to the difficulties found here. Order of data arrival is irrelevant: when a fact is posted it </p>
    <p class="calibre_2">can trigger the appropriate rules. Feedback is easily handled as well: the output of any set of rules can </p>
    <p class="calibre_2">post to the blackboard and cause the triggering of yet more applicable rules. </p>
    <p class="calibre_2">
      <span class="bold">Tip 43</span>
    </p>
    <p class="calibre_2">Use Blackboards to Coordinate Workflow</p>
    <p class="calibre_2">We can use the blackboard to coordinate disparate facts and agents, while still maintaining </p>
    <p class="calibre_2">independence and even isolation among participants. </p>
    <p class="calibre_2">You can accomplish the same results with more brute-force methods, of course, but you'll have a </p>
    <p class="calibre_2">more brittle system. When it breaks, all the king's horses and all the king's men might not get your </p>
    <p class="calibre_2">program working again. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Power of Plain Text</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">It's Just a View</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Do you use blackboard systems in the real world—the message board by the refrigerator, or</p>
    <p class="calibre_2">the big whiteboard at work? What makes them effective? Are messages ever posted with a</p>
    <p class="calibre_2">consistent format? Does it matter? </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">30. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">For each of the following applications, would a blackboard system be appropriate or not? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Why? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">1. </p>
    <p class="calibre_2"><span class="bold">Image processing. </span> You'd like to have a number of parallel processes grab</p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00214.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00294.jpg"/>
    </p>
    <p class="calibre_2">chunks of an image, process them, and put the completed chunk back. </p>
    <p class="calibre_2">2. <span class="bold">Group calendaring. </span> You've got people scattered across the globe, in different</p>
    <p class="calibre_2">time zones, and speaking different languages, trying to schedule a meeting. </p>
    <p class="calibre_2">3. <span class="bold">Network monitoring tool. </span> The system gathers performance statistics and</p>
    <p class="calibre_2">collects trouble reports. You'd like to implement some agents to use this </p>
    <p class="calibre_2">information to look for trouble in the system. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00162.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00129.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00119.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00039.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Chapter 6. While You Are Coding</span>
    </p>
    <p class="calibre_2">Conventional wisdom says that once a project is in the coding phase, the work is mostly mechanical, </p>
    <p class="calibre_2">transcribing the design into executable statements. We think that this attitude is the single biggest </p>
    <p class="calibre_2">reason that many programs are ugly, inefficient, poorly structured, unmaintainable, and just plain </p>
    <p class="calibre_2">wrong. </p>
    <p class="calibre_2">Coding is not mechanical. If it were, all the CASE tools that people pinned their hopes on in the early</p>
    <p class="calibre_2">1980s would have replaced programmers long ago. There are decisions to be made every</p>
    <p class="calibre_2">minute—decisions that require careful thought and judgment if the resulting program is to enjoy a long, </p>
    <p class="calibre_2">accurate, and productive life. </p>
    <p class="calibre_2">Developers who don't actively think about their code are programming by coincidence—the code</p>
    <p class="calibre_2">might work, but there's no particular reason why. In <span class="italic">Programming by Coincidence, </span> we advocate a </p>
    <p class="calibre_2">more positive involvement with the coding process. </p>
    <p class="calibre_2">While most of the code we write executes quickly, we occasionally develop algorithms that have the </p>
    <p class="calibre_2">potential to bog down even the fastest processors. In <span class="italic">Algorithm Speed, </span> we discuss ways to estimate </p>
    <p class="calibre_2">the speed of code, and we give some tips on how to spot potential problems before they happen. </p>
    <p class="calibre_2">Pragmatic Programmers think critically about all code, including our own. We constantly see room for </p>
    <p class="calibre_2">improvement in our programs and our designs. In <span class="italic">Refactoring, </span> we look at techniques that help us fix </p>
    <p class="calibre_2">up existing code even while we're in the midst of a project. </p>
    <p class="calibre_2">Something that should be in the back of your mind whenever you're producing code is that you'll </p>
    <p class="calibre_2">someday have to test it. Make code easy to test, and you'll increase the likelihood that it will actually </p>
    <p class="calibre_2">get tested, a thought we develop in <span class="italic">Code That's Easy to Test. </span></p>
    <p class="calibre_2">Finally, in <span class="italic">Evil Wizards, </span> we suggest that you should be careful of tools that write reams of code on </p>
    <p class="calibre_2">your behalf unless you understand what they're doing. </p>
    <p class="calibre_2">Most of us can drive a car largely on autopilot—we don't explicitly command our foot to press a pedal, </p>
    <p class="calibre_2">or our arm to turn the wheel—we just think "slow down and turn right." However, good, safe drivers are</p>
    <p class="calibre_2">constantly reviewing the situation, checking for potential problems, and putting themselves into good</p>
    <p class="calibre_2">positions in case the unexpected happens. The same is true of coding—it may be largely routine, but</p>
    <p class="calibre_2">keeping your wits about you could well prevent a disaster. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00183.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00262.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Programming by Coincidence</span>
    </p>
    <p class="calibre_2">Do you ever watch old black-and-white war movies? The weary soldier advances cautiously out of the</p>
    <p class="calibre_2">brush. There's a clearing ahead: are there any land mines, or is it safe to cross? There aren't any</p>
    <p class="calibre_2">indications that it's a minefield—no signs, barbed wire, or craters. The soldier pokes the ground ahead</p>
    <p class="calibre_2">of him with his bayonet and winces, expecting an explosion. There isn't one. So he proceeds</p>
    <p class="calibre_2">painstakingly through the field for a while, prodding and poking as he goes. Eventually, convinced that</p>
    <p class="calibre_2">the field is safe, he straightens up and marches proudly forward, only to be blown to pieces. </p>
    <p class="calibre_2">The soldier's initial probes for mines revealed nothing, but this was merely lucky. He was led to a false</p>
    <p class="calibre_2">conclusion—with disastrous results. </p>
    <p class="calibre_2">As developers, we also work in minefields. There are hundreds of traps just waiting to catch us each</p>
    <p class="calibre_2">day. Remembering the soldier's tale, we should be wary of drawing false conclusions. We should</p>
    <p class="calibre_2">avoid programming by coincidence—relying on luck and accidental successes— in favor of</p>
    <p class="calibre_2">
      <span class="italic">programming deliberately. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">How to Program by Coincidence</span>
    </p>
    <p class="calibre_2">Suppose Fred is given a programming assignment. Fred types in some code, tries it, and it seems to </p>
    <p class="calibre_2">work. Fred types in some more code, tries it, and it still seems to work. After several weeks of coding </p>
    <p class="calibre_2">this way, the program suddenly stops working, and after hours of trying to fix it, he still doesn't know </p>
    <p class="calibre_2">why. Fred may well spend a significant amount of time chasing this piece of code around without ever </p>
    <p class="calibre_2">being able to fix it. No matter what he does, it just doesn't ever seem to work right. </p>
    <p class="calibre_2">Fred doesn't know why the code is failing because <span class="italic">he didn't know why it worked in the first place. </span> It </p>
    <p class="calibre_2">seemed to work, given the limited "testing" that Fred did, but that was just a coincidence. Buoyed by </p>
    <p class="calibre_2">false confidence, Fred charged ahead into oblivion. Now, most intelligent people may know someone </p>
    <p class="calibre_2">like Fred, but <span class="italic">we</span> know better. We don't rely on coincidences—do we? </p>
    <p class="calibre_2">Sometimes we might. Sometimes it can be pretty easy to confuse a happy coincidence with a </p>
    <p class="calibre_2">purposeful plan. Let's look at a few examples. </p>
    <p class="calibre_2">
      <span class="bold">Accidents of Implementation</span>
    </p>
    <p class="calibre_2">Accidents of implementation are things that happen simply because that's the way the code is </p>
    <p class="calibre_2">currently written. You end up relying on undocumented error or boundary conditions. </p>
    <p class="calibre_2">Suppose you call a routine with bad data. The routine responds in a particular way, and you code</p>
    <p class="calibre_2">based on that response. But the author didn't intend for the routine to work that way—it was never</p>
    <p class="calibre_2">even considered. When the routine gets "fixed," your code may break. In the most extreme case, the</p>
    <p class="calibre_2">routine you called may not even be designed to do what you want, but it <span class="italic">seems</span> to work okay. Calling </p>
    <p class="calibre_2">things in the wrong order, or in the wrong context, is a related problem. </p>
    <p class="calibre_2">paint(g); </p>
    <p class="calibre_2">invalidate(); </p>
    <p class="calibre_2">validate(); </p>
    <p class="calibre_2">revalidate(); </p>
    <p class="calibre_2">repaint(); </p>
    <p class="calibre_2">paintImmediately(r); </p>
    <p class="calibre_2">Here it looks like Fred is desperately trying to get something out on the screen. But these routines </p>
    <p class="calibre_2">were never designed to be called this way; although they seem to work, that's really just a coincidence. </p>
    <p class="calibre_2">To add insult to injury, when the component finally does get drawn, Fred won't try to go back and take</p>
    <p class="calibre_2">out the spurious calls. "It works now, better leave well enough alone…." </p>
    <p class="calibre_2">It's easy to be fooled by this line of thought. Why should you take the risk of messing with something </p>
    <p class="calibre_2">that's working? Well, we can think of several reasons:</p>
    <p class="calibre_2">It may not really be working—it might just look like it is. </p>
    <p class="calibre_2">The boundary condition you rely on may be just an accident. In different circumstances (a </p>
    <p class="calibre_2">different screen resolution, perhaps), it might behave differently. </p>
    <p class="calibre_2">Undocumented behavior may change with the next release of the library. </p>
    <p class="calibre_2">Additional and unnecessary calls make your code slower. </p>
    <p class="calibre_2">Additional calls also increase the risk of introducing new bugs of their own. </p>
    <p class="calibre_2">For code you write that others will call, the basic principles of good modularization and of hiding </p>
    <p class="calibre_2">implementation behind small, well-documented interfaces can all help. A well-specified contract (see </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design by Contract) can help eliminate misunderstandings. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">For routines you call, rely only on documented behavior. If you can't, for whatever reason, then </p>
    <p class="calibre_2">document your assumption well. </p>
    <p class="calibre_2">
      <span class="bold">Accidents of Context</span>
    </p>
    <p class="calibre_2">You can have "accidents of context" as well. Suppose you are writing a utility module. Just because </p>
    <p class="calibre_2">you are currently coding for a GUI environment, does the module have to rely on a GUI being present? </p>
    <p class="calibre_2">Are you relying on English-speaking users? Literate users? What else are you relying on that isn't </p>
    <p class="calibre_2">guaranteed? </p>
    <p class="calibre_2">
      <span class="bold">Implicit Assumptions</span>
    </p>
    <p class="calibre_2">Coincidences can mislead at all levels—from generating requirements through to testing. Testing is</p>
    <p class="calibre_2">particularly fraught with false causalities and coincidental outcomes. It's easy to assume that <span class="italic">X</span> causes </p>
    <p class="calibre_2"><span class="italic">Y, </span><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline"> but as we said in Debugging</span></span></a>: don't assume it, prove it. </p>
    <p class="calibre_2">At all levels, people operate with many assumptions in mind—but these assumptions are rarely</p>
    <p class="calibre_2">documented and are often in conflict between different developers. Assumptions that aren't based on</p>
    <p class="calibre_2">well-established facts are the bane of all projects. </p>
    <p class="calibre_2">
      <span class="bold">Tip 44</span>
    </p>
    <p class="calibre_2">Don't Program by Coincidence</p>
    <p class="calibre_2">
      <span class="bold">How to Program Deliberately</span>
    </p>
    <p class="calibre_2">We want to spend less time churning out code, catch and fix errors as early in the development cycle </p>
    <p class="calibre_2">as possible, and create fewer errors to begin with. It helps if we can program deliberately:</p>
    <p class="calibre_2">Always be aware of what you are doing. Fred let things get slowly out of hand, until he ended </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">up boiled, like the frog in Stone Soup and Boiled Frogs. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">Don't code blindfolded. Attempting to build an application you don't fully understand, or to use </p>
    <p class="calibre_2">a technology you aren't familiar with, is an invitation to be misled by coincidences. </p>
    <p class="calibre_2">Proceed from a plan, whether that plan is in your head, on the back of a cocktail napkin, or on </p>
    <p class="calibre_2">a wall-sized printout from a CASE tool. </p>
    <p class="calibre_2">Rely only on reliable things. Don't depend on accidents or assumptions. If you can't tell the </p>
    <p class="calibre_2">difference in particular circumstances, assume the worst. </p>
    <p class="calibre_2">Document your assumptions. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Design by Contract</span></span></a>, can help clarify your assumptions in your </p>
    <p class="calibre_2">own mind, as well as help communicate them to others. </p>
    <p class="calibre_2">Don't just test your code, but test your assumptions as well. Don't guess; actually try it. Write </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">an assertion to test your assumptions (see Assertive Programming</span></span></a>). If your assertion is right, </p>
    <p class="calibre_2">you have improved the documentation in your code. If you discover your assumption is wrong, </p>
    <p class="calibre_2">then count yourself lucky. </p>
    <p class="calibre_2">Prioritize your effort. Spend time on the important aspects; more than likely, these are the </p>
    <p class="calibre_2">hard parts. If you don't have fundamentals or infrastructure correct, brilliant bells and whistles </p>
    <p class="calibre_2">will be irrelevant. </p>
    <p class="calibre_2">Don't be a slave to history. Don't let existing code dictate future code. All code can be</p>
    <p class="calibre_2">replaced if it is no longer appropriate. Even within one program, don't let what you've already</p>
    <p class="calibre_2">done constrain what you do next—be ready to refactor (see <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Refactoring). This decision may </span></span></a></p>
    <p class="calibre_2">impact the project schedule. The assumption is that the impact will be less than the cost of </p>
    <p class="calibre_2"><span class="italic">not</span> making the change. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[1]</span></span></a></p>
    <p class="calibre_2">[1] You can also go too far here. We once knew a developer who rewrote all source he was</p>
    <p class="calibre_2">given because he had his own naming conventions. </p>
    <p class="calibre_2">So next time something seems to work, but you don't know why, make sure it isn't just a coincidence. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Stone Soup and Boiled Frogs</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Debugging</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design by Contract</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Assertive Programming</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Temporal Coupling</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Refactoring</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">It's All Writing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">31. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Can you identify some coincidences in the following C code fragment? Assume that this </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">code is buried deep in a library routine. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">fprintf (stderr, " <span class="italic">Error, continue? </span>"); </p>
    <p class="calibre_2">gets(buf); </p>
    <p class="calibre_2">
      <span class="bold">32. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">This piece of C code might work some of the time, on some machines. Then again, it </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">might not. What's wrong? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="italic">/* Truncate string to its last maxlen chars */</span>
    </p>
    <p class="calibre_2"><span class="bold">void</span> string_tail(<span class="bold">char</span> *string, <span class="bold">int</span> maxlen) {</p>
    <p class="calibre_2"><span class="bold">int</span> len = strlen(string); </p>
    <p class="calibre_2"><span class="bold">if</span> (len &gt; maxlen) {</p>
    <p class="calibre_2">strcpy(string, string + (len - maxlen)); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="bold">33. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">This code comes from a general-purpose Java tracing suite. The function writes a string </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">to a log file. It passes its unit test, but fails when one of the Web developers uses it. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00229.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00179.jpg"/>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">What coincidence does it rely on? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><span class="bold">public static void</span> debug(String s) <span class="bold">throws</span> IOException {</p>
    <p class="calibre_2">FileWriter fw = <span class="bold">new</span> FileWriter( <span class="italic">"debug.log", </span>&#13;
<span class="bold">true</span>); </p>
    <p class="calibre_2">fw.write(s); </p>
    <p class="calibre_2">fw.flush(); </p>
    <p class="calibre_2">fw.close(); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00073.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00049.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Algorithm Speed</span>
    </p>
    <p class="calibre_2">In <span class="italic">Estimating, </span> we talked about estimating things such as how long it takes to walk across town, or how</p>
    <p class="calibre_2">long a project will take to finish. However, there is another kind of estimating that Pragmatic</p>
    <p class="calibre_2">Programmers use almost daily: estimating the resources that algorithms use—time, processor, </p>
    <p class="calibre_2">memory, and so on. </p>
    <p class="calibre_2">This kind of estimating is often crucial. Given a choice between two ways of doing something, which </p>
    <p class="calibre_2">do you pick? You know how long your program runs with 1,000 records, but how will it scale to </p>
    <p class="calibre_2">1,000,000? What parts of the code need optimizing? </p>
    <p class="calibre_2">It turns out that these questions can often be answered using common sense, some analysis, and a </p>
    <p class="calibre_2">way of writing approximations called the "big O" notation. </p>
    <p class="calibre_2">
      <span class="bold">What Do We Mean by Estimating Algorithms? </span>
    </p>
    <p class="calibre_2">Most nontrivial algorithms handle some kind of variable input—sorting <span class="italic">n</span> strings, inverting an <span class="italic">m × n</span></p>
    <p class="calibre_2">matrix, or decrypting a message with an <span class="italic">n</span>-bit key. Normally, the size of this input will affect the </p>
    <p class="calibre_2">algorithm: the larger the input, the longer the running time or the more memory used. </p>
    <p class="calibre_2">If the relationship were always linear (so that the time increased in direct proportion to the value of <span class="italic">n</span>), </p>
    <p class="calibre_2">this section wouldn't be important. However, most significant algorithms are not linear. The good news </p>
    <p class="calibre_2">is that many are sublinear. A binary search, for example, doesn't need to look at every candidate when </p>
    <p class="calibre_2">finding a match. The bad news is that other algorithms are considerably worse than linear; runtimes or </p>
    <p class="calibre_2">memory requirements increase far faster than <span class="italic">n. </span> An algorithm that takes a minute to process ten items </p>
    <p class="calibre_2">may take a lifetime to process 100. </p>
    <p class="calibre_2">We find that whenever we write anything containing loops or recursive calls, we subconsciously check </p>
    <p class="calibre_2">the runtime and memory requirements. This is rarely a formal process, but rather a quick confirmation </p>
    <p class="calibre_2">that what we're doing is sensible in the circumstances. However, we sometimes <span class="italic">do</span> find ourselves </p>
    <p class="calibre_2">performing a more detailed analysis. That's when the <span class="italic">O</span>() notation comes in useful. </p>
    <p class="calibre_2">
      <span class="bold">The O() Notation</span>
    </p>
    <p class="calibre_2">The <span class="italic">O</span>() notation is a mathematical way of dealing with approximations. When we write that a </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">particular sort routine sorts <span class="italic">n</span> records in <span class="italic">O</span>( <span class="italic">n </span>) time, we are simply saying that the worst-case time </p>
    <p class="calibre_2">taken will vary as the square of <span class="italic">n. </span> Double the number of records, and the time will increase roughly </p>
    <p class="calibre_2">fourfold. Think of the <span class="italic">O</span> as meaning <span class="italic">on the order of. </span> The <span class="italic">O</span>() notation puts an upper bound on the value </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">of the thing we're measuring (time, memory, and so on). If we say a function takes <span class="italic">O</span>( <span class="italic">n </span>) time, then we</p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">know that the upper bound of the time it takes will not grow faster than <span class="italic">n </span>. Sometimes we come up </p>
    <p class="calibre_2">with fairly complex <span class="italic">O</span>() functions, but because the highest-order term will dominate the value as <span class="italic">n</span></p>
    <p class="calibre_2">increases, the convention is to remove all low-order terms, and not to bother showing any constant </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">multiplying factors. <span class="italic">O</span>( <span class="italic">n </span>/2 <span class="italic">+</span> 3 <span class="italic">n</span>) is the same as <span class="italic">O</span>( <span class="italic">n </span>/2), which is equivalent to <span class="italic">O</span>( <span class="italic">n </span>). This is actually a </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">weakness of the <span class="italic">O</span>() notation—one <span class="italic">O</span>( <span class="italic">n </span>) algorithm may be 1,000 times faster than another <span class="italic">O</span>( <span class="italic">n </span>) </p>
    <p class="calibre_2">algorithm, but you won't know it from the notation. </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Figure 6.1</span></span></a> shows several common <span class="italic">O</span>() notations you'll come across, along with a graph comparing </p>
    <p class="calibre_2">running times of algorithms in each category. Clearly, things quickly start getting out of hand once we </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">get over <span class="italic">O</span>( <span class="italic">n </span>). </p>
    <p class="calibre_2">
      <span class="bold">Figure 6.1. Runtimes of various algorithms</span>
    </p>
    <p class="calibre_2">
      <img class="calibre_30" src="images/00087.jpg"/>
    </p>
    <p class="calibre_2">For example, suppose you've got a routine that takes 1 s to process 100 records. How long will it take </p>
    <p class="calibre_2">to process 1,000? If your code is <span class="italic">O</span>(1), then it will still take 1 s. If it's <span class="italic">O</span>(lg( <span class="italic">n</span>)), then you'll probably be </p>
    <p class="calibre_2">waiting about 3 s. <span class="italic">O</span>( <span class="italic">n</span>) will show a linear increase to 10 s, while an <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)) will take some 33 s. If </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">you're unlucky enough to have an <span class="italic">O</span>( <span class="italic">n </span>) routine, then sit back for 100 s while it does its stuff. And if </p>
    <p class="calibre_2">
      <span class="italic">n</span>
    </p>
    <p class="calibre_2">you're using an exponential algorithm <span class="italic">O</span>(2 ), you might want to make a cup of coffee—your routine</p>
    <p class="calibre_2">263</p>
    <p class="calibre_2">should finish in about 10</p>
    <p class="calibre_2">years. Let us know how the universe ends. </p>
    <p class="calibre_2">The <span class="italic">O</span>() notation doesn't apply just to time; you can use it to represent any other resources used by an </p>
    <p class="calibre_2">algorithm. For example, it is often useful to be able to model memory consumption (see Exercise 35). </p>
    <p class="calibre_2">
      <span class="bold">Common Sense Estimation</span>
    </p>
    <p class="calibre_2">You can estimate the order of many basic algorithms using common sense. </p>
    <p class="calibre_2"><span class="bold">Simple loops. </span> If a simple loop runs from 1 to <span class="italic">n, </span> then the algorithm is likely to be <span class="italic">O</span>( <span class="italic">n</span>) <span class="italic">—</span> time </p>
    <p class="calibre_2">increases linearly with <span class="italic">n. </span> Examples include exhaustive searches, finding the maximum value </p>
    <p class="calibre_2">in an array, and generating checksums. </p>
    <p class="calibre_2"><span class="bold">Nested loops. </span> If you nest a loop inside another, then your algorithm becomes <span class="italic">O</span>( <span class="italic">m × n</span>) <span class="italic">, </span></p>
    <p class="calibre_2">where <span class="italic">m</span> and <span class="italic">n</span> are the two loops' limits. This commonly occurs in simple sorting algorithms, </p>
    <p class="calibre_2">such as bubble sort, where the outer loop scans each element in the array in turn, and the </p>
    <p class="calibre_2">inner loop works out where to place that element in the sorted result. Such sorting algorithms </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">tend to be <span class="italic">O</span>( <span class="italic">n </span>). </p>
    <p class="calibre_2"><span class="bold">Binary chop. </span> If your algorithm halves the set of things it considers each time around the</p>
    <p class="calibre_2">loop, then it is likely to be logarithmic, <span class="italic">O</span>(lg( <span class="italic">n</span>)) (see Exercise 37). A binary search of a sorted </p>
    <p class="calibre_2">list, traversing a binary tree, and finding the first set bit in a machine word can all be <span class="italic">O</span>(lg( <span class="italic">n</span>)). </p>
    <p class="calibre_2"><span class="bold">Divide and conquer. </span> Algorithms that partition their input, work on the two halves</p>
    <p class="calibre_2">independently, and then combine the result can be <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)). The classic example is </p>
    <p class="calibre_2">quicksort, which works by partitioning the data into two halves and recursively sorting each. </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">Although technically <span class="italic">O</span>( <span class="italic">n </span>) <span class="italic">, </span> because its behavior degrades when it is fed sorted input, the </p>
    <p class="calibre_2">average runtime of quicksort is <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)). </p>
    <p class="calibre_2"><span class="bold">Combinatoric. </span> Whenever algorithms start looking at the permutations of things, their</p>
    <p class="calibre_2">running times may get out of hand. This is because permutations involve factorials (there are </p>
    <p class="calibre_2">5! = 5 × 4 × 3 × 2 × 1 = 120 permutations of the digits from 1 to 5). Time a combinatoric</p>
    <p class="calibre_2">algorithm for five elements: it will take six times longer to run it for six, and 42 times longer for </p>
    <p class="calibre_2">seven. Examples include algorithms for many of the acknowledged <span class="italic">hard</span> problems—the</p>
    <p class="calibre_2">traveling salesman problem, optimally packing things into a container, partitioning a set of</p>
    <p class="calibre_2">numbers so that each set has the same total, and so on. Often, heuristics are used to reduce</p>
    <p class="calibre_2">the running times of these types of algorithms in particular problem domains. </p>
    <p class="calibre_2">
      <span class="bold">Algorithm Speed in Practice</span>
    </p>
    <p class="calibre_2">It's unlikely that you'll spend much time during your career writing sort routines. The ones in the </p>
    <p class="calibre_2">libraries available to you will probably outperform anything you may write without substantial effort. </p>
    <p class="calibre_2">However, the basic kinds of algorithms we've described earlier pop up time and time again. Whenever</p>
    <p class="calibre_2">you find yourself writing a simple loop, you know that you have an <span class="italic">O</span>( <span class="italic">n</span>) algorithm. If that loop contains </p>
    <p class="calibre_2">an inner loop, then you're looking at <span class="italic">O</span>( <span class="italic">m × n</span>) <span class="italic">. </span> You should be asking yourself how large these values </p>
    <p class="calibre_2">can get. If the numbers are bounded, then you'll know how long the code will take to run. If the </p>
    <p class="calibre_2">numbers depend on external factors (such as the number of records in an overnight batch run, or the </p>
    <p class="calibre_2">number of names in a list of people), then you might want to stop and consider the effect that large </p>
    <p class="calibre_2">values may have on your running time or memory consumption. </p>
    <p class="calibre_2">
      <span class="bold">Tip 45</span>
    </p>
    <p class="calibre_2">Estimate the Order of Your Algorithms</p>
    <p class="calibre_2">There are some approaches you can take to address potential problems. If you have an algorithm that </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">is <span class="italic">O</span>( <span class="italic">n </span>) <span class="italic">, </span> try to find a divide and conquer approach that will take you down to <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)). </p>
    <p class="calibre_2">If you're not sure how long your code will take, or how much memory it will use, try running it, varying </p>
    <p class="calibre_2">the input record count or whatever is likely to impact the runtime. Then plot the results. You should </p>
    <p class="calibre_2">soon get a good idea of the shape of the curve. Is it curving upward, a straight line, or flattening off as </p>
    <p class="calibre_2">the input size increases? Three or four points should give you an idea. </p>
    <p class="calibre_2">2</p>
    <p class="calibre_2">Also consider just what you're doing in the code itself. A simple <span class="italic">O</span>( <span class="italic">n </span>) loop may well perform better </p>
    <p class="calibre_2">that a complex, <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)) one for smaller values of <span class="italic">n, </span> particularly if the <span class="italic">O</span>( <span class="italic">n</span> lg( <span class="italic">n</span>)) algorithm has an </p>
    <p class="calibre_2">expensive inner loop. </p>
    <p class="calibre_2">In the middle of all this theory, don't forget that there are practical considerations as well. Runtime may </p>
    <p class="calibre_2">look like it increases linearly for small input sets. But feed the code millions of records and suddenly</p>
    <p class="calibre_2">the time degrades as the system starts to thrash. If you test a sort routine with random input keys, you </p>
    <p class="calibre_2">may be surprised the first time it encounters ordered input. Pragmatic Programmers try to cover both </p>
    <p class="calibre_2">the theoretical and practical bases. After all this estimating, the only timing that counts is the speed of </p>
    <p class="calibre_2">your code, running in the production environment, with real data. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[2]</span></span></a> This leads to our next tip. </p>
    <p class="calibre_2">[2] In fact, while testing the sort algorithms used as an exercise for this section on a 64MB Pentium, the</p>
    <p class="calibre_2">authors ran out of real memory while running the radix sort with more than seven million numbers. The </p>
    <p class="calibre_2">sort started using swap space, and times degraded dramatically. </p>
    <p class="calibre_2">
      <span class="bold">Tip 46</span>
    </p>
    <p class="calibre_2">Test Your Estimates</p>
    <p class="calibre_2">If it's tricky getting accurate timings, use <span class="italic">code profilers</span> to count the number of times the different steps </p>
    <p class="calibre_2">in your algorithm get executed, and plot these figures against the size of the input. </p>
    <p class="calibre_2">
      <span class="bold">Best Isn't Always Best</span>
    </p>
    <p class="calibre_2">You also need to be pragmatic about choosing appropriate algorithms—the fastest one is not always</p>
    <p class="calibre_2">the best for the job. Given a small input set, a straightforward insertion sort will perform just as well as</p>
    <p class="calibre_2">a quicksort, and will take you less time to write and debug. You also need to be careful if the algorithm</p>
    <p class="calibre_2">you choose has a high setup cost. For small input sets, this setup may dwarf the running time and</p>
    <p class="calibre_2">make the algorithm inappropriate. </p>
    <p class="calibre_2">Also be wary of <span class="italic">premature optimization. </span> It's always a good idea to make sure an algorithm really is a </p>
    <p class="calibre_2">bottleneck before investing your precious time trying to improve it. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Estimating</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Every developer should have a feel for how algorithms are designed and analyzed. Robert </p>
    <p class="calibre_2"><span class="calibre_5"><span class="underline">Sedgewick has written a series of accessible books on the subject ([Sed83</span></span>, <span class="calibre_5"><span class="underline">SF96, Sed92</span></span>] </p>
    <p class="calibre_2">and others). We recommend adding one of his books to your collection, and making a point of </p>
    <p class="calibre_2">reading it. </p>
    <p class="calibre_2">For those who like more detail than Sedgewick provides, read Donald Knuth's definitive <span class="italic">Art of </span></p>
    <p class="calibre_2"><span class="italic">Computer Programming</span><span class="calibre_5"><span class="underline"> books, which analyze a wide range of algorithms [Knu97a, Knu97b</span></span>, </p>
    <p class="calibre_2">
      <span class="calibre_5">
        <span class="underline">Knu98]. </span>
      </span>
    </p>
    <p class="calibre_2">In Exercise 34, we look at sorting arrays of long integers. What is the impact if the keys are </p>
    <p class="calibre_2">more complex, and the overhead of key comparison is high? Does the key structure affect the </p>
    <p class="calibre_2">efficiency of the sort algorithms, or is the fastest sort always fastest? </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">34. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">We have coded a set of simple sort routines, which can be downloaded from our Web </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">site (http://www.pragmaticprogrammer.com</span></span></a>). Run them on various machines available to </p>
    <p class="calibre_2">you. Do your figures follow the expected curves? What can you deduce about the </p>
    <p class="calibre_2">relative speeds of your machines? What are the effects of various compiler optimization </p>
    <p class="calibre_2">settings? Is the radix sort indeed linear? </p>
    <p class="calibre_2">
      <span class="bold">35. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The routine below prints out the contents of a binary tree. Assuming the tree is </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">balanced, roughly how much stack space will the routine use while printing a tree of </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">1,000,000 elements? (Assume that subroutine calls impose no significant stack </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">overhead.)</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00031.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00052.jpg"/>
    </p>
    <p class="calibre_2"><span class="bold"> void</span> printTree(<span class="bold">const</span> Node *node) {</p>
    <p class="calibre_2"><span class="bold">char</span> buffer[1000]; </p>
    <p class="calibre_2"><span class="bold"> if</span> (node) {</p>
    <p class="calibre_2">printTree(node-&gt;left)<span class="bold">; </span></p>
    <p class="calibre_2">getNodeAsString(node, buffer); </p>
    <p class="calibre_2">puts(buffer); </p>
    <p class="calibre_2">printTree(node-&gt;right); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="bold">36. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Can you see any way to reduce the stack requirements of the routine in Exercise 35 </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">(apart from reducing the size of the buffer)? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">37. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">we claimed that a binary chop is </span>
        </span>
        <span class="italic">
          <span class="calibre_5">
            <span class="underline">O</span>
          </span>
        </span>
        <span class="calibre_5">
          <span class="underline">(lg(n)). Can you prove this? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00155.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00309.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Refactoring</span>
    </p>
    <p class="calibre_2">
      <span class="italic">Change and decay in all around I see …</span>
    </p>
    <p class="calibre_2">
      <span class="bold">H. F. Lyte, "Abide With Me" </span>
    </p>
    <p class="calibre_2">As a program evolves, it will become necessary to rethink earlier decisions and rework portions of the </p>
    <p class="calibre_2">code. This process is perfectly natural. Code needs to evolve; it's not a static thing. </p>
    <p class="calibre_2">Unfortunately, the most common metaphor for software development is building construction (Bertrand </p>
    <p class="calibre_2">
      <span class="calibre_5">
        <span class="underline">Meyer [Mey97b] uses the term "Software Construction"). But using construction as the guiding </span>
      </span>
    </p>
    <p class="calibre_2">metaphor implies these steps:</p>
    <p class="calibre_2">1. An architect draws up blueprints. </p>
    <p class="calibre_2">2. Contractors dig the foundation, build the superstructure, wire and plumb, and apply finishing </p>
    <p class="calibre_2">touches. </p>
    <p class="calibre_2">3. The tenants move in and live happily ever after, calling building maintenance to fix any </p>
    <p class="calibre_2">problems. </p>
    <p class="calibre_2">Well, software doesn't quite work that way. Rather than construction, software is more like </p>
    <p class="calibre_2"><span class="italic">gardening—</span> it is more organic than concrete. You plant many things in a garden according to an initial </p>
    <p class="calibre_2">plan and conditions. Some thrive, others are destined to end up as compost. You may move plantings </p>
    <p class="calibre_2">relative to each other to take advantage of the interplay of light and shadow, wind and rain. Overgrown </p>
    <p class="calibre_2">plants get split or pruned, and colors that clash may get moved to more aesthetically pleasing </p>
    <p class="calibre_2">locations. You pull weeds, and you fertilize plantings that are in need of some extra help. You </p>
    <p class="calibre_2">constantly monitor the health of the garden, and make adjustments (to the soil, the plants, the layout) </p>
    <p class="calibre_2">as needed. </p>
    <p class="calibre_2">Business people are comfortable with the metaphor of building construction: it is more scientific than</p>
    <p class="calibre_2">gardening, it's repeatable, there's a rigid reporting hierarchy for management, and so on. But we're not</p>
    <p class="calibre_2">building skyscrapers—we aren't as constrained by the boundaries of physics and the real world. </p>
    <p class="calibre_2">The gardening metaphor is much closer to the realities of software development. Perhaps a certain</p>
    <p class="calibre_2">routine has grown too large, or is trying to accomplish too much—it needs to be split into two. Things</p>
    <p class="calibre_2">that don't work out as planned need to be weeded or pruned. </p>
    <p class="calibre_2">Rewriting, reworking, and re-architecting code is collectively known as <span class="italic">refactoring. </span></p>
    <p class="calibre_2">
      <span class="bold">When Should You Refactor? </span>
    </p>
    <p class="calibre_2">When you come across a stumbling block because the code doesn't quite fit anymore, or you notice </p>
    <p class="calibre_2">two things that should really be merged, or anything else at all strikes you as being "wrong," <span class="italic">don't </span></p>
    <p class="calibre_2"><span class="italic">hesitate to change it</span> There's no time like the present. Any number of things may cause code to qualify </p>
    <p class="calibre_2">for refactoring:</p>
    <p class="calibre_2"><span class="bold">Duplication. </span> You've discovered a violation of the <span class="italic">DRY</span> principle (<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">The Evils of Duplication</span></span></a>). </p>
    <p class="calibre_2"><span class="bold">Nonorthogonal design. </span> You've discovered some code or design that could be made more</p>
    <p class="calibre_2">orthogonal (<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Orthogonality</span></span></a>). </p>
    <p class="calibre_2"><span class="bold">Outdated knowledge. </span> Things change, requirements drift, and your knowledge of the</p>
    <p class="calibre_2">problem increases. Code needs to keep up. </p>
    <p class="calibre_2"><span class="bold">Performance. </span> You need to move functionality from one area of the system to another to</p>
    <p class="calibre_2">improve performance. </p>
    <p class="calibre_2">Refactoring your code—moving functionality around and updating earlier decisions—is really an</p>
    <p class="calibre_2">exercise in <span class="italic">pain management. </span> Let's face it, changing source code around can be pretty painful: it was </p>
    <p class="calibre_2">almost working, and now it's <span class="italic">really</span> torn up. Many developers are reluctant to start ripping up code just </p>
    <p class="calibre_2">because it isn't quite right. </p>
    <p class="calibre_2">
      <span class="bold">Real-World Complications</span>
    </p>
    <p class="calibre_2">So you go to your boss or client and say, "This code works, but I need another week to refactor it." </p>
    <p class="calibre_2">We can't print their reply. </p>
    <p class="calibre_2">Time pressure is often used as an excuse for not refactoring. But this excuse just doesn't hold up: fail</p>
    <p class="calibre_2">to refactor now, and there'll be a far greater time investment to fix the problem down the road—when</p>
    <p class="calibre_2">there are more dependencies to reckon with. Will there be more time available then? Not in our</p>
    <p class="calibre_2">experience. </p>
    <p class="calibre_2">You might want to explain this principle to the boss by using a medical analogy: think of the code that</p>
    <p class="calibre_2">needs refactoring as a "growth." Removing it requires invasive surgery. You can go in now, and take it</p>
    <p class="calibre_2">out while it is still small. Or, you could wait while it grows and spreads—but removing it then will be</p>
    <p class="calibre_2">both more expensive and more dangerous. Wait even longer, and you may lose the patient entirely. </p>
    <p class="calibre_2">
      <span class="bold">Tip 47</span>
    </p>
    <p class="calibre_2">Refactor Early, Refactor Often</p>
    <p class="calibre_2">Keep track of the things that need to be refactored. If you can't refactor something immediately, make </p>
    <p class="calibre_2">sure that it gets placed on the schedule. Make sure that users of the affected code <span class="italic">know</span> that it is </p>
    <p class="calibre_2">scheduled to be refactored and how this might affect them. </p>
    <p class="calibre_2">
      <span class="bold">How Do You Refactor? </span>
    </p>
    <p class="calibre_2">Refactoring started out in the Smalltalk community, and, along with other trends (such as design </p>
    <p class="calibre_2">patterns), has started to gain a wider audience. But as a topic it is still fairly new; there isn't much </p>
    <p class="calibre_2">
      <span class="calibre_5">
        <span class="underline">+</span>
      </span>
    </p>
    <p class="calibre_2">published on it. The first major book on refactoring ([<span class="calibre_5"><span class="underline">FBB 99], and also [</span></span><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 47</span></span></a>]) is being published </p>
    <p class="calibre_2">around the same time as this book. </p>
    <p class="calibre_2">At its heart, refactoring is redesign. Anything that you or others on your team designed can be </p>
    <p class="calibre_2">redesigned in light of new facts, deeper understandings, changing requirements, and so on. But if you </p>
    <p class="calibre_2">proceed to rip up vast quantities of code with wild abandon, you may find yourself in a worse position </p>
    <p class="calibre_2">than when you started. </p>
    <p class="calibre_2">Clearly, refactoring is an activity that needs to be undertaken slowly, deliberately, and carefully. Martin </p>
    <p class="calibre_2">Fowler offers the following simple tips on how to refactor without doing more harm than good (see the </p>
    <p class="calibre_2">box on in [<span class="calibre_5"><span class="underline">FS97</span></span>]):</p>
    <p class="calibre_2">1. Don't try to refactor and add functionality at the same time. </p>
    <p class="calibre_2">2. Make sure you have good tests before you begin refactoring. Run the tests as often as </p>
    <p class="calibre_2">possible. That way you will know quickly if your changes have broken anything. </p>
    <p class="calibre_2">
      <span class="bold">Automatic Refactoring</span>
    </p>
    <p class="calibre_2">Historically, Smalltalk users have always enjoyed a <span class="italic">class browser</span> as part </p>
    <p class="calibre_2">of the IDE. Not to be confused with Web browsers, class browsers let </p>
    <p class="calibre_2">users navigate through and examine class hierarchies and methods. </p>
    <p class="calibre_2">Typically, class browsers allow you to edit code, create new methods and </p>
    <p class="calibre_2">classes, and so on. The next variation on this idea is the <span class="italic">refactoring </span></p>
    <p class="calibre_2">
      <span class="italic">browser. </span>
    </p>
    <p class="calibre_2">A refactoring browser can semiautomatically perform common refactoring </p>
    <p class="calibre_2">operations for you: splitting up a long routine into smaller ones, </p>
    <p class="calibre_2">automatically propagating changes to method and variable names, drag </p>
    <p class="calibre_2">and drop to assist you in moving code, and so on. </p>
    <p class="calibre_2">As we write this book, this technology has yet to appear outside of the</p>
    <p class="calibre_2">Smalltalk world, but this is likely to change at the same speed that Java</p>
    <p class="calibre_2">changes—rapidly. In the meantime, the pioneering Small-talk refactoring</p>
    <p class="calibre_2">browser can be found online at [<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 20]. </span></span></a></p>
    <p class="calibre_2">3. Take short, deliberate steps: move a field from one class to another, fuse two similar methods </p>
    <p class="calibre_2">into a superclass. Refactoring often involves making many localized changes that result in a </p>
    <p class="calibre_2">larger-scale change. If you keep your steps small, and test after each step, you will avoid </p>
    <p class="calibre_2">prolonged debugging. </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">We'll talk more about testing at this level in Code That's Easy to Test, and larger-scale testing in </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Ruthless Testing, but Mr. Fowler's point of maintaining good regression tests is the key to refactoring </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">with confidence. </p>
    <p class="calibre_2">It can also be helpful to make sure that drastic changes to a module—such as altering its interface or</p>
    <p class="calibre_2">its functionality in an incompatible manner—break the build. That is, old clients of this code should fall</p>
    <p class="calibre_2">to compile. You can then quickly find the old clients and make the necessary changes to bring them up</p>
    <p class="calibre_2">to date. </p>
    <p class="calibre_2">So next time you see a piece of code that isn't quite as it should be, fix both it and everything that </p>
    <p class="calibre_2">depends on it. Manage the pain: if it hurts now, but is going to hurt even more later, you might as well </p>
    <p class="calibre_2">get it over with. Remember the lessons of <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Software Entropy, don't live with broken windows. </span></span></a></p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Cat Ate My Source Code</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Software Entropy</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Stone Soup and Boiled Frogs</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Evils of Duplication</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Programming by Coincidence</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Code That's Easy to Test</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Ruthless Testing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">38. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The following code has obviously been updated several times over the years, but the </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">changes haven't improved its structure. Refactor it. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><span class="bold">if</span> (state == TEXAS) {</p>
    <p class="calibre_2">rate = TX_RATE; </p>
    <p class="calibre_2">amt = base * TX_RATE; </p>
    <p class="calibre_2">calc = 2*basis(amt) + extra(amt)*1.05; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold"> else if</span> ((state == OHIO) || (state == MAINE; </p>
    <p class="calibre_2">rate = (state == OHIO) ? OH_RATE : MN_RATE]</p>
    <p class="calibre_2">amt = base * rate; </p>
    <p class="calibre_2">calc = 2*basis(amt) + extra(amt)*1.05; </p>
    <p class="calibre_2"><span class="bold">if</span> (state == OHIO)</p>
    <p class="calibre_2">points = 2; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">else</span> {</p>
    <p class="calibre_2">rate = 1; </p>
    <p class="calibre_2">amt = base; </p>
    <p class="calibre_2">calc = 2*basis(amt) + extra(amt)*1.05; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="bold">39. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The following Java class needs to support a few more shapes. Refactor the class to </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">prepare it for the additions</span></span></a>. </p>
    <p class="calibre_2"><span class="bold"> public class</span> Shape {</p>
    <p class="calibre_2"><span class="bold"> public static final int</span> SQUARE = 1; </p>
    <p class="calibre_2"><span class="bold"> public static final int</span> CIRCLE = 2; </p>
    <p class="calibre_2"><span class="bold"> public static final int</span> RIGHT_TRIANGLE = 3; </p>
    <p class="calibre_2"><span class="bold"> private int</span> shapeType; </p>
    <p class="calibre_2"><span class="bold"> private double</span> size; </p>
    <p class="calibre_2"><span class="bold"> public</span> Shape(<span class="bold">int</span> shapeType, <span class="bold">double</span> size) {</p>
    <p class="calibre_2"><span class="bold">this. </span>shapeType = shapeType; </p>
    <p class="calibre_2"><span class="bold">this. </span>size = size; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">// ... <span class="italic">other methods ... </span></p>
    <p class="calibre_2"><span class="bold"> public double</span> area(){</p>
    <p class="calibre_2"><span class="bold"> switch</span> (shapeType) {</p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00131.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00175.jpg"/>
    </p>
    <p class="calibre_2"><span class="bold"> case</span> SQUARE: <span class="bold">return</span> size*size; </p>
    <p class="calibre_2"><span class="bold"> case</span> CIRCLE: <span class="bold">return</span> Math.PI*size*size/4.0; </p>
    <p class="calibre_2"><span class="bold"> case</span> RIGHT_TRIANGLE: <span class="bold">return</span> size*size/2.0; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="bold"> return 0; </span>
    </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="bold">40. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">This Java code is part of a framework that will be used throughout your project. Refactor </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">it to be more general and easier to extend in the future. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><span class="bold">public class</span> Window {</p>
    <p class="calibre_2"><span class="bold"> public</span> Window( <span class="italic">int</span> width, int height) { ... }</p>
    <p class="calibre_2"><span class="bold"> public void</span> setSize( <span class="italic">int</span> width, <span class="italic">int</span> height) { ... }</p>
    <p class="calibre_2"><span class="bold"> public boolean</span> overlaps(Window w) { ... }</p>
    <p class="calibre_2"><span class="bold"> public int</span> getArea() { ... }</p>
    <p class="calibre_2">
      <span class="bold"> }</span>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00234.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00003.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Code That's Easy to Test</span>
    </p>
    <p class="calibre_2">The <span class="italic">Software IC</span> is a metaphor that people like to toss around when discussing reusability and </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">component-based development.[3] The idea is that software components should be combined just a</span></span></a>s</p>
    <p class="calibre_2">integrated circuit chips are combined. This works only if the components you are using are known to </p>
    <p class="calibre_2">be reliable. </p>
    <p class="calibre_2">[3] The term "Software IC" (Integrated Circuit) seems to have been invented in 1986 by Cox and</p>
    <p class="calibre_2">Novobilski in their Objective-C book <span class="italic">Object-Oriented Programming</span><span class="calibre_5"><span class="underline"> [CN91</span></span>]. </p>
    <p class="calibre_2">Chips are designed to be tested—not just at the factory, not just when they are installed, but also in</p>
    <p class="calibre_2">the field when they are deployed. More complex chips and systems may have a full Built-in Self Test</p>
    <p class="calibre_2">(BIST) feature that runs some base-level diagnostics internally, or a Test Access Mechanism (TAM)</p>
    <p class="calibre_2">that provides a test harness that allows the external environment to provide stimuli and collect</p>
    <p class="calibre_2">responses from the chip. </p>
    <p class="calibre_2">We can do the same thing in software. Like our hardware colleagues, we need to build testability into </p>
    <p class="calibre_2">the software from the very beginning, and test each piece thoroughly before trying to wire them </p>
    <p class="calibre_2">together. </p>
    <p class="calibre_2">
      <span class="bold">Unit Testing</span>
    </p>
    <p class="calibre_2">Chip-level testing for hardware is roughly equivalent to <span class="italic">unit testing</span> in software—testing done on each</p>
    <p class="calibre_2">module, in isolation, to verify its behavior. We can get a better feeling for how a module will react in the</p>
    <p class="calibre_2">big wide world once we have tested it throughly under controlled (even contrived) conditions. </p>
    <p class="calibre_2">A software unit test is code that exercises a module. Typically, the unit test will establish some kind of </p>
    <p class="calibre_2">artificial environment, then invoke routines in the module being tested. It then checks the results that </p>
    <p class="calibre_2">are returned, either against known values or against the results from previous runs of the same test </p>
    <p class="calibre_2">(regression testing). </p>
    <p class="calibre_2">Later, when we assemble our "software IC's" into a complete system, we'll have confidence that the </p>
    <p class="calibre_2">individual parts work as expected, and then we can use the same unit test facilities to test the system </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">as a whole. We talk about this large-scale checking of the system in Ruthless Testing. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">Before we get that far, however, we need to decide what to test at the unit level. Typically, </p>
    <p class="calibre_2">programmers throw a few random bits of data at the code and call it tested. We can do much better, </p>
    <p class="calibre_2">using the ideas behind <span class="italic">design by contract. </span></p>
    <p class="calibre_2">
      <span class="bold">Testing Against Contract</span>
    </p>
    <p class="calibre_2">We like to think of unit testing as <span class="italic">testing against contract</span> (see <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Design by Contract</span></span></a>). We want to write </p>
    <p class="calibre_2">test cases that ensure that a given unit honors its contract. This will tell us two things: whether the </p>
    <p class="calibre_2">code meet the contract, and whether the contract means what we think it means. We want to test that </p>
    <p class="calibre_2">the module delivers the functionality it promises, over a wide range of test cases and boundary </p>
    <p class="calibre_2">conditions. </p>
    <p class="calibre_2">What does this mean in practice? Let's look at the square root routine we first encountered on page </p>
    <p class="calibre_2">114. Its contract is simple:</p>
    <p class="calibre_2">
      <span class="bold">require:</span>
    </p>
    <p class="calibre_2">argument &gt;= 0; </p>
    <p class="calibre_2">
      <span class="bold">ensure:</span>
    </p>
    <p class="calibre_2">((result * result) - argument).abs &lt;= epsilon*argument; </p>
    <p class="calibre_2">This tells us what to test:</p>
    <p class="calibre_2">Pass in a negative argument and ensure that it is rejected. </p>
    <p class="calibre_2">Pass in an argument of zero to ensure that it is accepted (this is the boundary value). </p>
    <p class="calibre_2">Pass in values between zero and the maximum expressible argument and verify that the </p>
    <p class="calibre_2">difference between the square of the result and the original argument is less than some small </p>
    <p class="calibre_2">fraction of the argument. </p>
    <p class="calibre_2">Armed with this contract, and assuming that our routine does its own pre- and postcondition checking, </p>
    <p class="calibre_2">we can write a basic test script to exercise the square root function. </p>
    <p class="calibre_2"><span class="bold">public void</span> testValue(<span class="bold">double</span> num, <span class="bold">double</span> expected) {</p>
    <p class="calibre_2"><span class="bold">double</span> result = 0.0; </p>
    <p class="calibre_2"><span class="bold">try</span> { // <span class="italic">We may throw a</span></p>
    <p class="calibre_2">result = mySqrt(num); // <span class="italic">precondition exception</span></p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">catch</span> (Throwable e) {</p>
    <p class="calibre_2"><span class="bold">if</span> (num &lt; 0.0) // <span class="italic">If input is &lt; 0, then</span></p>
    <p class="calibre_2"><span class="bold">return; </span> // <span class="italic">we're expecting the</span></p>
    <p class="calibre_2"><span class="bold">else</span> // <span class="italic">exception, otherwise</span></p>
    <p class="calibre_2">assert(<span class="bold">false</span>); // <span class="italic">force a test failure</span></p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">assert(Math.abs(expected-result) &lt; epsilon*expected); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">Then we can call this routine to test our square root function:</p>
    <p class="calibre_2">testValue(-4.0, 0.0); </p>
    <p class="calibre_2">testValue( 0.0, 0.0); </p>
    <p class="calibre_2">testValue( 2.0, 1.4142135624); </p>
    <p class="calibre_2">testValue(64.0, 8.0); </p>
    <p class="calibre_2">testValue(1.0e7, 3162.2776602); </p>
    <p class="calibre_2">This is a pretty simple test; in the real world, any nontrivial module is likely to be dependent on a </p>
    <p class="calibre_2">number of other modules, so how do we go about testing the combination? </p>
    <p class="calibre_2">Suppose we have a module A that uses a LinkedList and a Sort. In order, we would test:</p>
    <p class="calibre_2">1. LinkedList's contract, in full</p>
    <p class="calibre_2">2. Sort's contract, in full</p>
    <p class="calibre_2">3. A's contract, which relies on the other contracts but does not directly expose them</p>
    <p class="calibre_2">This style of testing requires you to test subcomponents of a module first. Once the subcomponents </p>
    <p class="calibre_2">have been verified, then the module itself can be tested. </p>
    <p class="calibre_2">If LinkedList and Sort's tests passed, but A's test failed, we can be pretty sure that the problem is in A, </p>
    <p class="calibre_2">or in A's <span class="italic">use</span> of one of those subcomponents. This technique is a great way to reduce debugging </p>
    <p class="calibre_2">effort: we can quickly concentrate on the likely source of the problem within module A, and not waste </p>
    <p class="calibre_2">time reexamining its subcomponents. </p>
    <p class="calibre_2">Why do we go to all this trouble? Above all, we want to avoid creating a "time bomb"—something that</p>
    <p class="calibre_2">sits around unnoticed and blows up at an awkward moment later in the project. By emphasizing testing</p>
    <p class="calibre_2">against contract, we can try to avoid as many of those downstream disasters as possible. </p>
    <p class="calibre_2">
      <span class="bold">Tip 48</span>
    </p>
    <p class="calibre_2">Design to Test</p>
    <p class="calibre_2">When you design a module, or even a single routine, you should design both its contract and the code </p>
    <p class="calibre_2">to test that contract. By designing code to pass a test and fulfill its contract, you may well consider </p>
    <p class="calibre_2">boundary conditions and other issues that wouldn't occur to you otherwise. There's no better way to fix </p>
    <p class="calibre_2">errors than by avoiding them in the first place. In fact, by building the tests <span class="italic">before</span> you implement the </p>
    <p class="calibre_2">code, you get to try out the interface before you commit to it. </p>
    <p class="calibre_2">
      <span class="bold">Writing Unit Tests</span>
    </p>
    <p class="calibre_2">The unit tests for a module shouldn't be shoved in some far-away corner of the source tree. They </p>
    <p class="calibre_2">need to be conveniently located. For small projects, you can embed the unit test for a module in the </p>
    <p class="calibre_2">module itself. For larger projects, we suggest moving each test into a subdirectory. Either way, </p>
    <p class="calibre_2">remember that if it isn't easy to find, it won't be used. </p>
    <p class="calibre_2">By making the test code readily accessible, you are providing developers who may use your code with </p>
    <p class="calibre_2">two invaluable resources:</p>
    <p class="calibre_2">1. Examples of how to use all the functionality of your module</p>
    <p class="calibre_2">2. A means to build regression tests to validate any future changes to the code</p>
    <p class="calibre_2">It's convenient, but not always practical, for each class or module to contain its own unit test. In Java, </p>
    <p class="calibre_2">for example, every class can have its own main. In all but the application's main class file, the main</p>
    <p class="calibre_2">routine can be used to run unit tests; it will be ignored when the application itself is run. This has the </p>
    <p class="calibre_2">benefit that the code you ship still contains the tests, which can be used to diagnose problems in the </p>
    <p class="calibre_2">field. </p>
    <p class="calibre_2">In C++ you can achieve the same effect (at compile time) by using #ifdef to compile unit test code </p>
    <p class="calibre_2">selectively. For example, here's a very simple unit test in C++, embedded in our module, that checks </p>
    <p class="calibre_2">our square root function using a testValue routine similar to the Java one defined previously:</p>
    <p class="calibre_2"><span class="italic"><span class="bold">#</span></span><span class="bold">ifdef</span> _TEST_</p>
    <p class="calibre_2"><span class="bold">int</span> main(<span class="bold">int</span> argc, <span class="bold">char</span> **argv)</p>
    <p class="calibre_2">{</p>
    <p class="calibre_2">argc--; argv++; // <span class="italic">skip program name</span></p>
    <p class="calibre_2"><span class="bold">if</span> (argc &lt; 2) { // <span class="italic">do standard tests if no args</span></p>
    <p class="calibre_2">testValue(-4.0, 0.0); </p>
    <p class="calibre_2">testValue( 0.0, 0.0); </p>
    <p class="calibre_2">testValue( 2.0, 1.4142135624); </p>
    <p class="calibre_2">testValue(64.0, 8.0); </p>
    <p class="calibre_2">testValue(1.0e7, 3162.2776602); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">else</span> { // <span class="italic">else use args</span></p>
    <p class="calibre_2"><span class="bold">double</span> num, expected; </p>
    <p class="calibre_2"><span class="bold">while</span> (argc &gt;= 2) {</p>
    <p class="calibre_2">num = atof(argv[0]); </p>
    <p class="calibre_2">expected = atof(argv[1]); </p>
    <p class="calibre_2">testValue(num,expected); </p>
    <p class="calibre_2">argc -= 2; </p>
    <p class="calibre_2">argv += 2; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">return</span> 0; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">
      <span class="italic">
        <span class="bold">#</span>
      </span>
      <span class="bold">endif</span>
    </p>
    <p class="calibre_2">This unit test will either run a minimal set of tests or, if given arguments, allow you to pass data in from </p>
    <p class="calibre_2">the outside world. A shell script could use this ability to run a much more complete set of tests. </p>
    <p class="calibre_2">What do you do if the correct response for a unit test is to exit, or abort the program? In that case, you </p>
    <p class="calibre_2">need to be able to select the test to run, perhaps by specifying an argument on the command line. </p>
    <p class="calibre_2">You'll also need to pass in parameters if you need to specify different starting conditions for your tests. </p>
    <p class="calibre_2">But providing unit tests isn't enough. You must run them, and run them often. It also helps if the class </p>
    <p class="calibre_2"><span class="italic">passes</span> its tests once in a while. </p>
    <p class="calibre_2">
      <span class="bold">Using Test Harnesses</span>
    </p>
    <p class="calibre_2">Because we usually write <span class="italic">a lot</span> of test code, and do a lot of testing, we'll make life easier on ourselves </p>
    <p class="calibre_2">and develop a standard testing harness for the project. The main shown in the previous section is a </p>
    <p class="calibre_2">very simple test harness, but usually we'll need more functionality than that. </p>
    <p class="calibre_2">A test harness can handle common operations such as logging status, analyzing output for expected </p>
    <p class="calibre_2">results, and selecting and running the tests. Harnesses may be GUI driven, may be written in the </p>
    <p class="calibre_2">same target language as the rest of the project, or may be implemented as a combination of makefiles</p>
    <p class="calibre_2">and Perl scripts. A simple test harness sis shown in the answer to Exercise 41 on page 305. </p>
    <p class="calibre_2">In object-oriented languages and environments, you might create a base class that provides these </p>
    <p class="calibre_2">common operations. Individual tests can subclass from that and add specific test code. You could use </p>
    <p class="calibre_2">a standard naming convention and reflection in Java to build a list of tests dynamically. This technique </p>
    <p class="calibre_2">is a nice way of honoring the <span class="italic">DRY</span> principle—you don't have to maintain a list of available tests. But</p>
    <p class="calibre_2">before you go off and start writing your own harness, you may want to investigate Kent Beck and Erich</p>
    <p class="calibre_2">Gamma's xUnit at [<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 22</span></span></a>]. They've already done the hard work. </p>
    <p class="calibre_2">Regardless of the technology you decide to use, test harnesses should include the following </p>
    <p class="calibre_2">capabilities:</p>
    <p class="calibre_2">A standard way to specify setup and cleanup</p>
    <p class="calibre_2">A method for selecting individual tests or all available tests</p>
    <p class="calibre_2">A means of analyzing output for expected (or unexpected) results</p>
    <p class="calibre_2">A standardized form of failure reporting</p>
    <p class="calibre_2">Tests should be composable; that is, a test can be composed of subtests of subcomponents to any </p>
    <p class="calibre_2">depth. We can use this feature to test selected parts of the system or the entire system just as easily, </p>
    <p class="calibre_2">using the same tools. </p>
    <p class="calibre_2">
      <span class="bold">Ad Hoc Testing</span>
    </p>
    <p class="calibre_2">During debugging, we may end up creating some particular tests on-the-fly. </p>
    <p class="calibre_2">These may be as simple as a print statement, or a piece of code entered </p>
    <p class="calibre_2">interactively in a debugging or IDE environment. </p>
    <p class="calibre_2">At the end of the debugging session you need to formalize the adhoc test. If the </p>
    <p class="calibre_2">code broke once, it is likely to break again. Dont't just throw away the test you </p>
    <p class="calibre_2">created; add it to the existing unit test. </p>
    <p class="calibre_2">For example, using JUnit (the Java member of the xUnit family), we might write our square root test as </p>
    <p class="calibre_2">follows:</p>
    <p class="calibre_2"><span class="bold">public class</span> JUnitExample <span class="bold">extends</span> TestCase {</p>
    <p class="calibre_2"><span class="bold">public</span> JUnitExample(<span class="bold">final</span> String name) {</p>
    <p class="calibre_2"><span class="bold">super</span>(name); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">protected void</span> setUp() {</p>
    <p class="calibre_2">
      <span class="italic">// Load up test data... </span>
    </p>
    <p class="calibre_2">testData.addElement(<span class="bold">new</span> dblPair(-4.0,0.0)); </p>
    <p class="calibre_2">testData.addElement(<span class="bold">new</span> dblPair(0.0,0.0)); </p>
    <p class="calibre_2">testData.addElement(<span class="bold">new</span> dblPair(64.0,8.0)); </p>
    <p class="calibre_2">testData.addElement(<span class="bold">new</span> dblPair(Double.MAX_VALUE, </p>
    <p class="calibre_2">1.3407807929942597E154)); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">public void</span> testMySqrt() {</p>
    <p class="calibre_2"><span class="bold">double</span> num, expected,.result = 0.0; </p>
    <p class="calibre_2">Enumeration enum = testData.element(); </p>
    <p class="calibre_2"><span class="bold">while</span> (enum.hasMoreElements()) {</p>
    <p class="calibre_2">dblPair p = (dblPair)enum.nextElement(); </p>
    <p class="calibre_2">num = p.getNum(); </p>
    <p class="calibre_2">expected = p.getExpected(); </p>
    <p class="calibre_2">testValue(num, expected); </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2"><span class="bold">public static</span> Test suite() {</p>
    <p class="calibre_2">TestSuite suite= <span class="bold">new</span> Testsuit(); </p>
    <p class="calibre_2">suite.addTest(<span class="bold">new</span> JUnitExample(" <span class="italic">testMySqrt</span>")); </p>
    <p class="calibre_2"><span class="bold">return</span> suite; </p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">}</p>
    <p class="calibre_2">JUnit is designed to be composable: we could add as many tests as we wanted to this suite, and each </p>
    <p class="calibre_2">of those tests could in turn be a suite. In addition, you have your choice of a graphical or batch </p>
    <p class="calibre_2">interface to drive the tests. </p>
    <p class="calibre_2">
      <span class="bold">Build a Test Window</span>
    </p>
    <p class="calibre_2">Even the best sets of tests are unlikely to find all the bugs; there's something about the damp, warm </p>
    <p class="calibre_2">conditions of a production environment that seems to bring them out of the woodwork. </p>
    <p class="calibre_2">This means you'll often need to test a piece of software once it has been deployed—with real-world</p>
    <p class="calibre_2">data flowing though its veins. Unlike a circuit board or chip, we don't have <span class="italic">test pins</span> in software, but we</p>
    <p class="calibre_2"><span class="italic">can</span> provide various views into the internal state of a module, without using the debugger (which may </p>
    <p class="calibre_2">be inconvenient or impossible in a production application). </p>
    <p class="calibre_2">Log files containing trace messages are one such mechanism. Log messages should be in a regular, </p>
    <p class="calibre_2">consistent format; you may want to parse them automatically to deduce processing time or logic paths</p>
    <p class="calibre_2">that the program took. Poorly or inconsistently formatted diagnostics are just so much "spew"—they</p>
    <p class="calibre_2">are difficult to read and impractical to parse. </p>
    <p class="calibre_2">Another mechanism for getting inside running code is the "hot-key" sequence. When this particular </p>
    <p class="calibre_2">combination of keys is pressed, a diagnostic control window pops up with status messages and so on. </p>
    <p class="calibre_2">This isn't something you normally would reveal to end users, but it can be very handy for the help </p>
    <p class="calibre_2">desk. </p>
    <p class="calibre_2">For larger, more complex server code, a nifty technique for providing a view into its operation is to </p>
    <p class="calibre_2">include a built-in Web server. Anyone can point a Web browser to the application's HTTP port (which </p>
    <p class="calibre_2">is usually on a nonstandard number, such as 8080) and see internal status, log entries, and possibly </p>
    <p class="calibre_2">even some sort of a debug control panel. This may sound difficult to implement, but it's not. Freely </p>
    <p class="calibre_2">available and embed-dable HTTP Web servers are available in a variety of modern languages. A good </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">place to start looking is [URL 58</span></span></a>]. </p>
    <p class="calibre_2">
      <span class="bold">A Culture of Testing</span>
    </p>
    <p class="calibre_2">All software you write <span class="italic">will</span> be tested—if not by you and your team, then by the eventual users—so you</p>
    <p class="calibre_2">might as well plan on testing it thoroughly. A little forethought can go a long way toward minimizing</p>
    <p class="calibre_2">maintenance costs and help-desk calls. </p>
    <p class="calibre_2">Despite its hacker reputation, the Perl community has a very strong commitment to unit and </p>
    <p class="calibre_2">regression testing. The Perl standard module installation procedure supports a regression test by </p>
    <p class="calibre_2">invoking</p>
    <p class="calibre_2">% make test</p>
    <p class="calibre_2">There's nothing magic about Perl itself in this regard. Perl makes it easier to collate and analyze test</p>
    <p class="calibre_2">results to ensure compliance, but the big advantage is simply that it's a standard—tests go in a</p>
    <p class="calibre_2">particular place, and have a certain expected output. <span class="italic">Testing is more cultural than technical; </span> we can </p>
    <p class="calibre_2">instill this testing culture in a project regardless of the language being used. </p>
    <p class="calibre_2">
      <span class="bold">Tip 49</span>
    </p>
    <p class="calibre_2">Test Your Software, or Your Users Will</p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Cat Ate My Source Code</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design by Contract</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Refactoring</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Ruthless Testing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">41. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design a test jig for the blender interface described in the answer to Exercise 17 on </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">page 289. Write a shell script that will perform a regression test for the blender. You </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">need to test basic functionality, error and boundary conditions, and any contractual </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">obligations. What restrictions are placed on changing the speed? Are they being </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">honored? </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00308.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00123.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00195.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00149.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_10" src="images/00159.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Evil Wizards</span>
    </p>
    <p class="calibre_2">There's no denying it—applications are getting harder and harder to write. User interfaces in particular</p>
    <p class="calibre_2">are becoming increasingly sophisticated. Twenty years ago, the average application would have a</p>
    <p class="calibre_2">glass teletype interface (if it had an interface at all). Asynchronous terminals would typically provide a</p>
    <p class="calibre_2">character interactive display, while pollable devices (such as the ubiquitous IBM 3270) would let you</p>
    <p class="calibre_2">fill in an entire screen before hitting </p>
    <p class="calibre_2">. Now, users expect graphical user interfaces, with </p>
    <p class="calibre_2">context-sensitive help, cut and paste, drag and drop, OLE integration, and MDI or SDI. Users are </p>
    <p class="calibre_2">looking for Web-browser integration and thin-client support. </p>
    <p class="calibre_2">All the time the applications themselves are getting more complex. Most developments now use a </p>
    <p class="calibre_2">multitier model, possibly with some middleware layer or a transaction monitor. These programs are </p>
    <p class="calibre_2">expected to be dynamic and flexible, and to interoperate with applications written by third parties. </p>
    <p class="calibre_2">Oh, and did we mention that we needed it all next week? </p>
    <p class="calibre_2">Developers are struggling to keep up. If we were using the same kind of tools that produced the basic </p>
    <p class="calibre_2">dumb-terminal applications 20 years ago, we'd never get anything done. </p>
    <p class="calibre_2">So the tool makers and infrastructure vendors have come up with a magic bullet, the <span class="italic">wizard. </span> Wizards</p>
    <p class="calibre_2">are great. Do you need an MDI application with OLE container support? Just click a single button, </p>
    <p class="calibre_2">answer a couple of simple questions, and the wizard will automatically generate skeleton code for you. </p>
    <p class="calibre_2">The Microsoft Visual C++ environment creates over 1,200 lines of code for this scenario, </p>
    <p class="calibre_2">automatically. Wizards are hard at work in other contexts, too. You can use wizards to create server</p>
    <p class="calibre_2">components, implement Java beans, and handle network interfaces— all complex areas where it's</p>
    <p class="calibre_2">nice to have expert help. </p>
    <p class="calibre_2">But using a wizard designed by a guru does not automatically make Joe developer equally expert. Joe</p>
    <p class="calibre_2">can feel pretty good—he's just produced a mass of code and a pretty spiffy-looking program. He just</p>
    <p class="calibre_2">adds in the specific application functionality and it's ready to ship. But unless Joe actually understands</p>
    <p class="calibre_2">the code that has been produced on his behalf, he's fooling himself. He's programming by</p>
    <p class="calibre_2">coincidence. Wizards are a one-way street—they cut the code for you, and then move on. If the code</p>
    <p class="calibre_2">they produce isn't quite right, or if circumstances change and you need to adapt the code, you're on</p>
    <p class="calibre_2">your own. </p>
    <p class="calibre_2">We are not against wizards. On the contrary, we dedicate an entire section (<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Code Generators) to </span></span></a></p>
    <p class="calibre_2">writing your own. But if you <span class="italic">do</span> use a wizard, and you don't understand all the code that it produces, </p>
    <p class="calibre_2">you won't be in control of your own application. You won't be able to maintain it, and you'll be </p>
    <p class="calibre_2">struggling when it conies time to debug. </p>
    <p class="calibre_2">
      <span class="bold">Tip 50</span>
    </p>
    <p class="calibre_2">Don't Use Wizard Code You Don't Understand</p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00221.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00348.jpg"/>
    </p>
    <p class="calibre_2">Some people feel that this is an extreme position. They say that developers routinely rely on things</p>
    <p class="calibre_2">they don't fully understand—the quantum mechanics of integrated circuits, the interrupt structure of the</p>
    <p class="calibre_2">processor, the algorithms used to schedule processes, the code in the supplied libraries, and so on. </p>
    <p class="calibre_2">We agree. And we'd feel the same about wizards if they were simply a set of library calls or standard</p>
    <p class="calibre_2">operating system services that developers could rely on. But they're not. Wizards generate code that</p>
    <p class="calibre_2">becomes an integral part of Joe's application. The wizard code is not factored out behind a tidy</p>
    <p class="calibre_2">interface—it is interwoven line by line with functionality that Joe writes. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[4]</span></span></a> Eventually, it stops being the</p>
    <p class="calibre_2">wizard's code and starts being Joe's. And no one should be producing code they don't fully </p>
    <p class="calibre_2">understand. </p>
    <p class="calibre_2">[4] However, there are other techniques that help manage complexity. We discuss two, beans and AOP, </p>
    <p class="calibre_2">in <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Orthogonality</span></span></a>. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Code Generators</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">If you have a GUI-building wizard available, use it to generate a skeleton application. Go </p>
    <p class="calibre_2">through every line of code it produces. Do you understand it all? Could you have produced it </p>
    <p class="calibre_2">yourself? Would you have produced it yourself, or is it doing things you don't need? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00196.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00167.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00060.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00264.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Chapter 7. Before the Project</span>
    </p>
    <p class="calibre_2">Do you ever get the feeling that your project is doomed, even before it starts? Sometimes it might be, </p>
    <p class="calibre_2">unless you establish some basic ground rules first. Otherwise, you might as well suggest that it be </p>
    <p class="calibre_2">shut down now, and save the sponsor some money. </p>
    <p class="calibre_2">At the very beginning of a project, you'll need to determine the requirements. Simply listening to users </p>
    <p class="calibre_2">is not enough: read <span class="italic">The Requirements Pit</span> to find out more. </p>
    <p class="calibre_2">Conventional wisdom and constraint management are the topics of <span class="italic">Solving Impossible Puzzles. </span></p>
    <p class="calibre_2">Whether you are performing requirements, analysis, coding, or testing, difficult problems will crop up. </p>
    <p class="calibre_2">Most of the time, they won't be as difficult as they first appear to be. </p>
    <p class="calibre_2">When you think you've got the problems solved, you may still not feel comfortable with jumping in and </p>
    <p class="calibre_2">starting. Is it simple procrastination, or is it something more? <span class="italic">Not Until You're Ready</span> offers advice on </p>
    <p class="calibre_2">when it may be prudent to listen to that cautionary voice inside your head. </p>
    <p class="calibre_2">Starting too soon is one problem, but waiting too long may be even worse. In <span class="italic">The Specification Trap, </span></p>
    <p class="calibre_2">we'll discuss the advantages of specification by example. </p>
    <p class="calibre_2">Finally, we'll look at some of the pitfalls of formal development processes and methodologies in <span class="italic">Circles </span></p>
    <p class="calibre_2"><span class="italic">and Arrows. </span> No matter how well thought out it is, and regardless of which "best practices" it includes, </p>
    <p class="calibre_2">no method can replace <span class="italic">thinking. </span></p>
    <p class="calibre_2">With these critical issues sorted out <span class="italic">before</span> the project gets under way, you can be better positioned to </p>
    <p class="calibre_2">avoid "analysis paralysis" and actually begin your successful project. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00008.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00124.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">The Requirements Pit</span>
    </p>
    <p class="calibre_2">
      <span class="italic">Perfection is achieved, not when there is nothing left to add, but when there is nothing left to take</span>
    </p>
    <p class="calibre_2">
      <span class="italic">away…. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">Antoine de St. Exupery, </span>
      <span class="italic">
        <span class="bold">Wind, Sand, and Stars, </span>
      </span>
      <span class="bold"> 1939</span>
    </p>
    <p class="calibre_2">Many books and tutorials refer to <span class="italic">requirements gathering</span> as an early phase of the project. The word</p>
    <p class="calibre_2">"gathering" seems to imply a tribe of happy analysts, foraging for nuggets of wisdom that are lying on</p>
    <p class="calibre_2">the ground all around them while the Pastoral Symphony plays gently in the background. "Gathering" </p>
    <p class="calibre_2">implies that the requirements are already there—you need merely find them, place them in your</p>
    <p class="calibre_2">basket, and be merrily on your way. </p>
    <p class="calibre_2">It doesn't quite work that way. Requirements rarely lie on the surface. Normally, they're buried deep </p>
    <p class="calibre_2">beneath layers of assumptions, misconceptions, and politics. </p>
    <p class="calibre_2">
      <span class="bold">Tip 51</span>
    </p>
    <p class="calibre_2">Don't Gather Requirements—Dig for Them</p>
    <p class="calibre_2">
      <span class="bold">Digging for Requirements</span>
    </p>
    <p class="calibre_2">How can you recognize a true requirement while you're digging through all the surrounding dirt? The </p>
    <p class="calibre_2">answer is both simple and complex. </p>
    <p class="calibre_2">The simple answer is that a requirement is a statement of something that needs to be accomplished. </p>
    <p class="calibre_2">Good requirements might include the following:</p>
    <p class="calibre_2">An employee record may be viewed only by a nominated group of people. </p>
    <p class="calibre_2">The cylinder-head temperature must not exceed the critical value, which varies by engine. </p>
    <p class="calibre_2">The editor will highlight keywords, which will be selected depending on the type of file being </p>
    <p class="calibre_2">edited. </p>
    <p class="calibre_2">However, very few requirements are as clear-cut, and that's what makes requirements analysis </p>
    <p class="calibre_2">complex. </p>
    <p class="calibre_2">The first statement in the list above may have been stated by the users as "Only an employee's </p>
    <p class="calibre_2">supervisors and the personnel department may view that employee's records." Is this statement truly a </p>
    <p class="calibre_2">requirement? Perhaps today, but it embeds business policy in an absolute statement. Policies change </p>
    <p class="calibre_2">regularly, so we probably don't want to hardwire them into our requirements. Our recommendation is </p>
    <p class="calibre_2">to document these policies separately from the requirement, and hyperlink the two. Make the </p>
    <p class="calibre_2">requirement the general statement, and give the developers the policy information as an example of </p>
    <p class="calibre_2">the type of thing they'll need to support in the implementation. Eventually, policy may end up as </p>
    <p class="calibre_2">metadata in the application. </p>
    <p class="calibre_2">This is a relatively subtle distinction, but it's one that will have profound implications for the developers. </p>
    <p class="calibre_2">If the requirement is stated as "Only personnel can view an employee record," the developer may end </p>
    <p class="calibre_2">up coding an explicit test every time the application accesses these files. However, if the statement is </p>
    <p class="calibre_2">"Only authorized users may access an employee record," the developer will probably design and </p>
    <p class="calibre_2">implement some kind of access control system. When policy changes (and it will), only the metadata </p>
    <p class="calibre_2">for that system will need to be updated. In fact, gathering requirements in this way naturally leads you </p>
    <p class="calibre_2">to a system that is well factored to support metadata. </p>
    <p class="calibre_2">The distinctions among requirements, policy, and implementation can get very blurred when user </p>
    <p class="calibre_2">interfaces are discussed. "The system must let you choose a loan term" is a statement of requirement. </p>
    <p class="calibre_2">"We need a list box to select the loan term" may or may not be. If the users absolutely must have a list </p>
    <p class="calibre_2">box, then it is a requirement. If instead they are describing the ability to choose, but are using <span class="italic">listbox</span></p>
    <p class="calibre_2">as an example, then it may not be. The box on page 205 discusses a project that went horribly wrong </p>
    <p class="calibre_2">because the users' interface needs were ignored. </p>
    <p class="calibre_2">It's important to discover the underlying reason <span class="italic">why</span> users do a particular thing, rather than just <span class="italic">the </span></p>
    <p class="calibre_2"><span class="italic">way</span> they currently do it. At the end of the day, your development has to solve their <span class="italic">business problem, </span></p>
    <p class="calibre_2">not just meet their stated requirements. Documenting the reasons behind requirements will give your </p>
    <p class="calibre_2">team invaluable information when making daily implementation decisions. </p>
    <p class="calibre_2">There's a simple technique for getting inside your users' requirements that isn't used often enough: </p>
    <p class="calibre_2">become a user. Are you writing a system for the help desk? Spend a couple of days monitoring the </p>
    <p class="calibre_2">phones with an experienced support person. Are you automating a manual stock control system? </p>
    <p class="calibre_2">Work in the warehouse for a week. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[1]</span></span></a> As well as giving you insight into how the system will <span class="italic">really</span> be </p>
    <p class="calibre_2">used, you'd be amazed at how the request "May I sit in for a week while you do your job?" helps build </p>
    <p class="calibre_2">trust and establishes a basis for communication with your users. Just remember not to get in the way! </p>
    <p class="calibre_2">[1] Does a week sound like a long time? It really isn't, particularly when you're looking at processes in</p>
    <p class="calibre_2">which management and workers occupy different worlds. Management will give you one view of how</p>
    <p class="calibre_2">things operate, but when you get down on the floor, you'll find a very different reality—one that will take</p>
    <p class="calibre_2">time to assimilate. </p>
    <p class="calibre_2">
      <span class="bold">Tip 52</span>
    </p>
    <p class="calibre_2">Work with a User to Think Like a User</p>
    <p class="calibre_2">The requirements mining process is also the time to start to build a rapport with your user base, </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">learning their expectations and hopes for the system you are building. See Great Expectations</span></span></a>, for </p>
    <p class="calibre_2">more. </p>
    <p class="calibre_2">
      <span class="bold">Documenting Requirements</span>
    </p>
    <p class="calibre_2">So you are sitting down with the users and prying genuine requirements from them. You come across</p>
    <p class="calibre_2">a few likely scenarios that describe what the application needs to do. Ever the professional, you want</p>
    <p class="calibre_2">to write these down and publish a document that everyone can use as a basis for discussions—the</p>
    <p class="calibre_2">developers, the end users, and the project sponsors. </p>
    <p class="calibre_2">That's a pretty wide audience. </p>
    <p class="calibre_2"><span class="calibre_5"><span class="underline">Ivar Jacobson [Jac94</span></span>] proposed the concept of <span class="italic">use cases</span> to capture requirements. They let you </p>
    <p class="calibre_2">describe a particular <span class="italic">use</span> of the system— not in terms of user interface, but in a more abstract fashion. </p>
    <p class="calibre_2">Unfortunately, Jacobson's book was a little vague on details, so there are now many different opinions</p>
    <p class="calibre_2">on what a use case should be. Is it formal or informal, simple prose or a structured document (like a</p>
    <p class="calibre_2">form)? What level of detail is appropriate (remember we have a wide audience)? </p>
    <p class="calibre_2">
      <span class="bold">Sometimes the Interface Is the System</span>
    </p>
    <p class="calibre_2">In an article in <span class="italic">Wired</span> magazine (January 1999, page 176), producer and</p>
    <p class="calibre_2">musician Brian Eno described an incredible piece of technology—the ultimate</p>
    <p class="calibre_2">mixing board. It does anything to sound that can be done. And yet, instead of</p>
    <p class="calibre_2">letting musicians make better music, or produce a recording faster or less</p>
    <p class="calibre_2">expensively, it gets in the way; it disrupts the creative process. </p>
    <p class="calibre_2">To see why, you have to look at how recording engineers work. They balance</p>
    <p class="calibre_2">sounds intuitively. Over the years, they develop an innate feedback loop</p>
    <p class="calibre_2">between their fingertips—sliding faders, rotating knobs, and so on However, the</p>
    <p class="calibre_2">interface to the new mixer didn't leverage off those abilities. Instead, it forced its</p>
    <p class="calibre_2">users to type on a keyboard or click a mouse. The functions it provided were</p>
    <p class="calibre_2">comprehensive, but they were packaged in unfamiliar and exotic ways. The</p>
    <p class="calibre_2">functions the engineers needed were sometimes hidden behind obscure names, </p>
    <p class="calibre_2">or were achieved with nonintuitive combinations of basic facilities. </p>
    <p class="calibre_2">That environment has a requirement to leverage existing skill sets. While </p>
    <p class="calibre_2">slavishly duplicating what already exists doesn't allow for progress, we must be </p>
    <p class="calibre_2">able to provide a <span class="italic">transition</span> to the future. </p>
    <p class="calibre_2">For example, the recording engineers may have been better served by some</p>
    <p class="calibre_2">sort of touchscreen interface—still tactile, still mounted as a traditional mixing</p>
    <p class="calibre_2">board might be, yet allowing the software to go beyond the realm of fixed knobs</p>
    <p class="calibre_2">and switches. Providing a comfortable transition through familiar metaphors is</p>
    <p class="calibre_2">one way to help get buy-in. </p>
    <p class="calibre_2">This example also illustrates our belief that successful tools adapt to the hands </p>
    <p class="calibre_2">that use them. In this case, it is the tools that you build for others that must be </p>
    <p class="calibre_2">adaptable. </p>
    <p class="calibre_2">One way of looking at use cases is to emphasize their goal-driven nature. Alistair Cockburn has a </p>
    <p class="calibre_2">paper that describes this approach, as well as templates that can be used (strictly or not) as a starting </p>
    <p class="calibre_2">place ([<span class="calibre_5"><span class="underline">Coc97a</span></span>], also online at [<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">URL 46</span></span></a><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">]). Figure 7.1</span></span></a> on the following page shows an abbreviated </p>
    <p class="calibre_2">example of his template, while <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Figure 7.2</span></span></a> shows his sample use case. </p>
    <p class="calibre_2">
      <span class="bold">Figure 7.1. Cockburn's use case template</span>
    </p>
    <p class="calibre_2">
      <img class="calibre_31" src="images/00279.jpg"/>
    </p>
    <p class="calibre_2">
      <span class="bold">Figure 7.2. A sample use case</span>
    </p>
    <p class="calibre_2">
      <img class="calibre_32" src="images/00023.jpg"/>
    </p>
    <p class="calibre_2">By using a formal template as an <span class="italic">aide-mémoire, </span> you can be sure that you include all the information </p>
    <p class="calibre_2">you need in a use case: performance characteristics, other involved parties, priority, frequency, and </p>
    <p class="calibre_2">various errors and exceptions that can crop up ("nonfunctional requirements"). This is also a great </p>
    <p class="calibre_2">place to record user comments such as "oh, except if we get a <span class="italic">xxx</span> condition, then we have to do <span class="italic">yyy</span></p>
    <p class="calibre_2">instead." The template also serves as a ready-made agenda for meetings with your users. </p>
    <p class="calibre_2">
      <img class="calibre_33" src="images/00138.jpg"/>
    </p>
    <p class="calibre_2">This sort of organization supports the hierarchical structuring of use cases—nesting more detailed use</p>
    <p class="calibre_2">cases inside higher-level ones. For example, <span class="italic">post debit</span> and <span class="italic">post credit</span> both elaborate on <span class="italic">post </span></p>
    <p class="calibre_2">
      <span class="italic">transaction. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">Use Case Diagrams</span>
    </p>
    <p class="calibre_2">Workflow can be captured with UML activity diagrams, and conceptual-level class diagrams can </p>
    <p class="calibre_2">sometimes be useful for modeling the business at hand. But true use cases are textual descriptions, </p>
    <p class="calibre_2">with a hierarchy and cross-links. Use cases can contain hyperlinks to other use cases, and they can </p>
    <p class="calibre_2">be nested within each other. </p>
    <p class="calibre_2">It seems incredible to us that anyone would seriously consider documenting information this dense </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">using only simplistic stick people such as Figure 7.3</span></span></a>. Don't be a slave to any notation; use whatever </p>
    <p class="calibre_2">method best communicates the requirements with your audience. </p>
    <p class="calibre_2">
      <span class="bold">Figure 7.3. UML use cases—so simple a child could do it! </span>
    </p>
    <p class="calibre_2">
      <span class="bold">Overspecifying</span>
    </p>
    <p class="calibre_2">A big danger in producing a requirements document is being too specific. Good requirements</p>
    <p class="calibre_2">documents remain abstract. Where requirements are concerned, the simplest statement that</p>
    <p class="calibre_2">accurately reflects the business need is best. This doesn't mean you can be vague—you must capture</p>
    <p class="calibre_2">the underlying semantic invariants as requirements, and document the specific or current work</p>
    <p class="calibre_2">practices as policy. </p>
    <p class="calibre_2">Requirements are not architecture. Requirements are not design, nor are they the user interface. </p>
    <p class="calibre_2">Requirements are <span class="italic">need. </span></p>
    <p class="calibre_2">
      <span class="bold">Seeing Further</span>
    </p>
    <p class="calibre_2">The Year 2000 problem is often blamed on short-sighted programmers, desperate to save a few bytes </p>
    <p class="calibre_2">in the days when mainframes had less memory than a modern TV remote control. </p>
    <p class="calibre_2">But it wasn't the programmers' doing, and it wasn't really a memory usage issue. If anything, it was the </p>
    <p class="calibre_2">system analysts' and designers' fault. The Y2K problem came about from two main causes: a failure to </p>
    <p class="calibre_2">see beyond current business practice, and a violation of the <span class="italic">DRY</span> principle. </p>
    <p class="calibre_2">Businesses were using the two-digit shortcut long before computers came on the scene. It was </p>
    <p class="calibre_2">common practice. The earliest data processing applications merely automated existing business </p>
    <p class="calibre_2">processes, and simply repeated the mistake. Even if the architecture required two-digit years for data </p>
    <p class="calibre_2">input, reporting, and storage, there should have been an abstraction of a DATE that "knew" the two </p>
    <p class="calibre_2">digits were an abbreviated form of the real date. </p>
    <p class="calibre_2">
      <span class="bold">Tip 53</span>
    </p>
    <p class="calibre_2">Abstractions Live Longer than Details</p>
    <p class="calibre_2">Does "seeing further" require you to predict the future? No. It means generating statements such as</p>
    <p class="calibre_2">
      <span class="italic">The system makes active use of an abstraction of DATEs. The system will implement </span>
    </p>
    <p class="calibre_2">
      <span class="italic">DATE services, such as formatting, storage, and math operations, consistently and </span>
    </p>
    <p class="calibre_2">
      <span class="italic">universally. </span>
    </p>
    <p class="calibre_2">The requirements will specify only that dates are used. It may hint that some math may be done on </p>
    <p class="calibre_2">dates. It may tell you that dates will be stored on various forms of secondary storage. These are </p>
    <p class="calibre_2">genuine requirements for a DATE module or class. </p>
    <p class="calibre_2">
      <span class="bold">Just One More Wafer-Thin Mint…</span>
    </p>
    <p class="calibre_2">Many projects failures are blamed on an increase in scope—also known as feature bloat, creeping</p>
    <p class="calibre_2">featurism, or requirements creep. This is an aspect of the boiled-frog syndrome from <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Stone Soup and </span></span></a></p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Boiled Frogs</span></span></a>. What can we do to prevent requirements from creeping up on us? </p>
    <p class="calibre_2">In the literature, you will find descriptions of many metrics, such as bugs reported and fixed, defect </p>
    <p class="calibre_2">density, cohesion, coupling, function points, lines of code, and so on. These metrics may be tracked </p>
    <p class="calibre_2">by hand or with software. </p>
    <p class="calibre_2">Unfortunately, not many projects seem to track requirements actively. This means that they have no</p>
    <p class="calibre_2">way to report on changes of scope—who requested a feature, who approved it, total number of</p>
    <p class="calibre_2">requests approved, and so on. </p>
    <p class="calibre_2">The key to managing growth of requirements is to point out each new feature's impact on the schedule </p>
    <p class="calibre_2">to the project sponsors. When the project is a year late from initial estimates and accusations start </p>
    <p class="calibre_2">flying, it can be helpful to have an accurate, complete picture of how, and when, requirements growth </p>
    <p class="calibre_2">occurred. </p>
    <p class="calibre_2">It's easy to get sucked into the "just one more feature" maelstrom, but by tracking requirements you </p>
    <p class="calibre_2">can get a clearer picture that "just one more feature" is really the fifteenth new feature added this </p>
    <p class="calibre_2">month. </p>
    <p class="calibre_2">
      <span class="bold">Maintain a Glossary</span>
    </p>
    <p class="calibre_2">As soon as you start discussing requirements, users and domain experts will use certain terms that </p>
    <p class="calibre_2">have specific meaning to them. They may differentiate between a "client" and a "customer," for </p>
    <p class="calibre_2">example. It would then be inappropriate to use either word casually in the system. </p>
    <p class="calibre_2">Create and maintain a <span class="italic">project glossary</span>—one place that defines all the specific terms and vocabulary</p>
    <p class="calibre_2">used in a project. All participants in the project, from end users to support staff, should use the</p>
    <p class="calibre_2">glossary to ensure consistency. This implies that the glossary needs to be widely accessible—a good</p>
    <p class="calibre_2">argument for Web-based documentation (more on that in a moment). </p>
    <p class="calibre_2">
      <span class="bold">Tip 54</span>
    </p>
    <p class="calibre_2">Use a Project Glossary</p>
    <p class="calibre_2">It's very hard to succeed on a project where the users and developers refer to the same thing by </p>
    <p class="calibre_2">different names or, even worse, refer to different things by the same name. </p>
    <p class="calibre_2">
      <span class="bold">Get the Word Out</span>
    </p>
    <p class="calibre_2">In <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">It's All Writing</span></span></a>, we discuss publishing of project documents to internal Web sites for easy access by </p>
    <p class="calibre_2">all participants. This method of distribution is particularly useful for requirements documents. </p>
    <p class="calibre_2">By presenting requirements as a hypertext document, we can better address the needs of a diverse</p>
    <p class="calibre_2">audience—we can give each reader what they want. Project sponsors can cruise along at a high level</p>
    <p class="calibre_2">of abstraction to ensure that business objectives are met. Programmers can use hyperlinks to "drill</p>
    <p class="calibre_2">down" to increasing levels of detail (even referencing appropriate definitions or engineering</p>
    <p class="calibre_2">specifications). </p>
    <p class="calibre_2">Web-based distribution also avoids the typical two-inch-thick binder entitled <span class="italic">Requirements Analysis</span></p>
    <p class="calibre_2">that no one ever reads and that becomes outdated the instant ink hits paper. </p>
    <p class="calibre_2">If it's on the Web, the programmers may even read it. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Stone Soup and Boiled Frogs</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00323.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00250.jpg"/>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Good-Enough Software</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Circles and Arrows</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">It's All Writing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Great Expectations</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Can you use the software you are writing? Is it possible to have a good feel for requirements </p>
    <p class="calibre_2"><span class="italic">without</span> being able to use the software yourself? </p>
    <p class="calibre_2">Pick a non-computer-related problem you currently need to solve. Generate requirements for </p>
    <p class="calibre_2">a noncomputer solution. </p>
    <p class="calibre_2">
      <span class="bold">Exercises</span>
    </p>
    <p class="calibre_2">
      <span class="bold">42. </span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Which of the following are probably genuine requirements? Restate those that are not to </span>
        </span>
      </a>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">make them more useful (if possible)</span></span></a>. </p>
    <p class="calibre_2">1. The response time must be less than 500 ms. </p>
    <p class="calibre_2">2. Dialog boxes will have a gray background. </p>
    <p class="calibre_2">3. The application will be organized as a number of front-end processes and a </p>
    <p class="calibre_2">back-end server. </p>
    <p class="calibre_2">4. If a user enters non-numeric characters in a numeric field, the system will beep </p>
    <p class="calibre_2">and not accept them. </p>
    <p class="calibre_2">5. The application code and data must fit within 256kB. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00185.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00256.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Solving Impossible Puzzles</span>
    </p>
    <p class="calibre_2">
      <span class="italic">Gordius, the King of Phrygia, once tied a knot that no one could untie. It was said that he who solved</span>
    </p>
    <p class="calibre_2">
      <span class="italic">the riddle of the Gordian Knot would rule all of Asia. So along comes Alexander the Great, who chops</span>
    </p>
    <p class="calibre_2">
      <span class="italic">the knot to bits with his sword. Just a little different interpretation of the requirements, that's all… and</span>
    </p>
    <p class="calibre_2">
      <span class="italic">he did end up ruling most of Asia. </span>
    </p>
    <p class="calibre_2">Every now and again, you will find yourself embroiled in the middle of a project when a really tough </p>
    <p class="calibre_2">puzzle comes up: some piece of engineering that you just can't get a handle on, or perhaps some bit </p>
    <p class="calibre_2">of code that is turning out to be much harder to write than you thought. Maybe it looks impossible. But </p>
    <p class="calibre_2">is it really as hard as it seems? </p>
    <p class="calibre_2">Consider real-world puzzles—those devious little bits of wood, wrought iron, or plastic that seem to</p>
    <p class="calibre_2">turn up as Christmas presents or at garage sales. All you have to do is remove the ring, or fit the</p>
    <p class="calibre_2">T-shaped pieces in the box, or whatever. </p>
    <p class="calibre_2">So you pull on the ring, or try to put the T's in the box, and quickly discover that the obvious solutions</p>
    <p class="calibre_2">just don't work. The puzzle can't be solved that way. But even though it's obvious, that doesn't stop</p>
    <p class="calibre_2">people from trying the same thing—over and over—thinking there must be a way. </p>
    <p class="calibre_2">Of course, there isn't. The solution lies elsewhere. The secret to solving the puzzle is to identify the </p>
    <p class="calibre_2">real (not imagined) constraints, and find a solution therein. Some constraints are <span class="italic">absolute; </span> others are </p>
    <p class="calibre_2">merely <span class="italic">preconceived notions. </span> Absolute constraints <span class="italic">must</span> be honored, however distasteful or stupid </p>
    <p class="calibre_2">they may appear to be. On the other hand, some apparent constraints may not be real constraints at </p>
    <p class="calibre_2">all. For example, there's that old bar trick where you take a brand new, unopened champagne bottle </p>
    <p class="calibre_2">and bet that you can drink beer out of it. The trick is to turn the bottle upside down, and pour a small </p>
    <p class="calibre_2">quantity of beer in the hollow in the bottom of the bottle. Many software problems can be just as </p>
    <p class="calibre_2">sneaky. </p>
    <p class="calibre_2">
      <span class="bold">Degrees of Freedom</span>
    </p>
    <p class="calibre_2">The popular buzz-phrase "thinking outside the box" encourages us to recognize constraints that might </p>
    <p class="calibre_2">not be applicable and to ignore them. </p>
    <p class="calibre_2">But this phrase isn't entirely accurate. If the "box" is the boundary of constraints and conditions, then </p>
    <p class="calibre_2">the trick is to <span class="italic">find</span> the box, which may be considerably larger than you think. </p>
    <p class="calibre_2">The key to solving puzzles is both to recognize the constraints placed on you and to recognize the </p>
    <p class="calibre_2">degrees of freedom you <span class="italic">do</span> have, for in those you'll find your solution. This is why some puzzles are so </p>
    <p class="calibre_2">effective; you may dismiss potential solutions too readily. </p>
    <p class="calibre_2">For example, can you connect all of the dots in the following puzzle and return to the starting point</p>
    <p class="calibre_2">with just three straight lines—without lifting your pen from the paper or retracing your steps <span class="calibre_5"><span class="underline">[Hol78</span></span>]? </p>
    <p class="calibre_2">
      <img class="calibre_34" src="images/00321.jpg"/>
    </p>
    <p class="calibre_2">You must challenge any preconceived notions and evaluate whether or not they are real, </p>
    <p class="calibre_2">hard-and-fast constraints. </p>
    <p class="calibre_2">It's not whether you think inside the box or outside the box. The problem lies in <span class="italic">finding</span> the</p>
    <p class="calibre_2">box—identifying the real constraints. </p>
    <p class="calibre_2">
      <span class="bold">Tip 55</span>
    </p>
    <p class="calibre_2">Don't Think Outside the Box— <span class="italic">Find</span> the Box</p>
    <p class="calibre_2">When faced with an intractable problem, enumerate <span class="italic">all</span> the possible avenues you have before you. </p>
    <p class="calibre_2">Don't dismiss anything, no matter how unusable or stupid it sounds. Now go through the list and </p>
    <p class="calibre_2">explain why a certain path cannot be taken. Are you sure? Can you <span class="italic">prove</span> it? </p>
    <p class="calibre_2">Consider the Trojan horse—a novel solution to an intractable problem. How do you get troops into a</p>
    <p class="calibre_2">walled city without being discovered? You can bet that "through the front door" was initially dismissed</p>
    <p class="calibre_2">as suicide. </p>
    <p class="calibre_2">Categorize and prioritize your constraints. When woodworkers begin a project, they cut the longest </p>
    <p class="calibre_2">pieces first, then cut the smaller pieces out of the remaining wood. In the same manner, we want to </p>
    <p class="calibre_2">identify the most restrictive constraints first, and fit the remaining constraints within them. </p>
    <p class="calibre_2">By the way, a solution to the Four Posts puzzle is shown on page 307. </p>
    <p class="calibre_2">
      <span class="bold">There Must Be an Easier Way! </span>
    </p>
    <p class="calibre_2">Sometimes you will find yourself working on a problem that seems much harder than you thought it</p>
    <p class="calibre_2">should be. Maybe it feels like you're going down the wrong path—that there must be an easier way</p>
    <p class="calibre_2">than this! Perhaps you are running late on the schedule now, or even despair of ever getting the</p>
    <p class="calibre_2">system to work because this particular problem is "impossible." </p>
    <p class="calibre_2">That's when you step back a pace and ask yourself these questions:</p>
    <p class="calibre_2"><span class="italic">Is</span> there an easier way? </p>
    <p class="calibre_2">Are you trying to solve the right problem, or have you been distracted by a peripheral </p>
    <p class="calibre_2">technicality? </p>
    <p class="calibre_2"><span class="italic">Why</span> is this thing a problem? </p>
    <p class="calibre_2">What is it that's making it so hard to solve? </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00355.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00082.jpg"/>
    </p>
    <p class="calibre_2">Does it have to be done this way? </p>
    <p class="calibre_2">Does it have to be done at all? </p>
    <p class="calibre_2">Many times a surprising revelation will come to you as you try to answer one of these questions. Many</p>
    <p class="calibre_2">times a reinterpretation of the requirements can make a whole set of problems go away—just like the</p>
    <p class="calibre_2">Gordian knot. </p>
    <p class="calibre_2">All you need are the real constraints, the misleading constraints, and the wisdom to know the </p>
    <p class="calibre_2">difference. </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Take a hard look at whatever difficult problem you are embroiled in today. Can you cut the </p>
    <p class="calibre_2">Gordian knot? Ask yourself the key questions we outlined above, especially <span class="italic">"Does it have to </span></p>
    <p class="calibre_2">
      <span class="italic">be done this way?" </span>
    </p>
    <p class="calibre_2">Were you handed a set of constraints when you signed on to your current project? Are they </p>
    <p class="calibre_2">all still applicable, and is the interpretation of them still valid? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00329.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00036.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Not Until You're Ready</span>
    </p>
    <p class="calibre_2">
      <span class="italic">He who hesitates is sometimes saved. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">James Thurber, </span>
      <span class="italic">
        <span class="bold">The Glass in the Field</span>
      </span>
    </p>
    <p class="calibre_2">Great performers share a trait: they know when to start and when to wait. The diver stands on the </p>
    <p class="calibre_2">high-board, waiting for the perfect moment to jump. The conductor stands before the orchestra, arms </p>
    <p class="calibre_2">raised, until she senses that the moment is right to start the piece. </p>
    <p class="calibre_2">You are a great performer. You too need to listen to the voice that whispers "wait." If you sit down to </p>
    <p class="calibre_2">start typing and there's some nagging doubt in your mind, heed it. </p>
    <p class="calibre_2">
      <span class="bold">Tip 56</span>
    </p>
    <p class="calibre_2">Listen to Nagging Doubts—Start When You're Ready</p>
    <p class="calibre_2">There used to be a style of tennis coaching called "inner tennis." You'd spend hours hitting balls over </p>
    <p class="calibre_2">the net, not particularly trying for accuracy, but instead verbalizing just where the ball hit relative to </p>
    <p class="calibre_2">some target (often a chair). The idea was that the feedback would train your subconscious and </p>
    <p class="calibre_2">reflexes, so that you improved without consciously knowing how or why. </p>
    <p class="calibre_2">As a developer, you've been doing the same kind of thing during your entire career. You've been trying </p>
    <p class="calibre_2">things and seeing which worked and which didn't. You've been accumulating experience and wisdom. </p>
    <p class="calibre_2">When you feel a nagging doubt, or experience some reluctance when faced with a task, heed it. You </p>
    <p class="calibre_2">may not be able to put your finger on exactly what's wrong, but give it time and your doubts will </p>
    <p class="calibre_2">probably crystallize into something more solid, something you can address. Software development is </p>
    <p class="calibre_2">still not a science. Let your instincts contribute to your performance. </p>
    <p class="calibre_2">
      <span class="bold">Good Judgment or Procrastination? </span>
    </p>
    <p class="calibre_2">Everyone fears the blank sheet of paper. Starting a new project (or even a new module in an existing </p>
    <p class="calibre_2">project) can be an unnerving experience. Many of us would prefer to put off making the initial </p>
    <p class="calibre_2">commitment of starting. So how can you tell when you're simply procrastinating, rather than </p>
    <p class="calibre_2">responsibly waiting for all the pieces to fall into place? </p>
    <p class="calibre_2">A technique that has worked for us in these circumstances is to start prototyping. Choose an area that </p>
    <p class="calibre_2">you feel will be difficult and begin producing some kind of proof of concept. One of two things will </p>
    <p class="calibre_2">typically happen. Shortly after starting, you may feel that you're wasting your time. This boredom is </p>
    <p class="calibre_2">probably a good indication that your initial reluctance was just a desire to put off the commitment to </p>
    <p class="calibre_2">start. Give up on the prototype, and hack into the real development. </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00212.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00258.jpg"/>
    </p>
    <p class="calibre_2">On the other hand, as the prototype progresses you may have one of those moments of revelation </p>
    <p class="calibre_2">when you suddenly realize that some basic premise was wrong. Not only that, but you'll see clearly </p>
    <p class="calibre_2">how you can put it right. You'll feel comfortable abandoning the prototype and launching into the </p>
    <p class="calibre_2">project proper. Your instincts were right, and you've just saved yourself and your team a considerable </p>
    <p class="calibre_2">amount of wasted effort. </p>
    <p class="calibre_2">When you make the decision to prototype as a way of investigating your unease, be sure to remember </p>
    <p class="calibre_2">why you're doing it. The last thing you want is to find yourself several weeks into serious development </p>
    <p class="calibre_2">before remembering that you started out writing a prototype. </p>
    <p class="calibre_2">Somewhat cynically, starting work on a prototype might also be more politically acceptable than simply </p>
    <p class="calibre_2">announcing that "I don't feel right about starting" and firing up solitaire. </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Discuss the fear-of-starting syndrome with your colleagues. Do others experience the same </p>
    <p class="calibre_2">thing? Do they heed it? What tricks do they use to overcome it? Can a group help overcome </p>
    <p class="calibre_2">an individual's reluctance, or is that just peer pressure? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00106.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00112.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">The Specification Trap</span>
    </p>
    <p class="calibre_2">
      <span class="italic">The Landing Pilot is the Non-Handling Pilot until the 'decision altitude' call, when the Handling </span>
    </p>
    <p class="calibre_2">
      <span class="italic">Non-Landing Pilot hands the handling to the Non-Handling Landing Pilot, unless the latter calls </span>
    </p>
    <p class="calibre_2">
      <span class="italic">'go-around,' in which case the Handling Non-Landing Pilot continues handling and the Non-Handling </span>
    </p>
    <p class="calibre_2">
      <span class="italic">Landing Pilot continues non-handling until the next call of 'land' or 'go-around' as appropriate. In view </span>
    </p>
    <p class="calibre_2">
      <span class="italic">of recent confusions over these rules, it was deemed necessary to restate them clearly. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">British Airways memorandum, quoted in Pilot Magazine, December 1996</span>
    </p>
    <p class="calibre_2">Program specification is the process of taking a requirement and reducing it down to the point where a</p>
    <p class="calibre_2">programmer's skill can take over. It is an act of communication, explaining and clarifying the world in</p>
    <p class="calibre_2">such a way as to remove major ambiguities. As well as talking to the developer who will be performing</p>
    <p class="calibre_2">the initial implementation, the specification is a record for future generations of programmers who will</p>
    <p class="calibre_2">be maintaining and enhancing the code. The specification is also an agreement with the user—a</p>
    <p class="calibre_2">codification of their needs and an implicit contract that the final system will be in line with that</p>
    <p class="calibre_2">requirement. </p>
    <p class="calibre_2">Writing a specification is quite a responsibility. </p>
    <p class="calibre_2">The problem is that many designers find it difficult to stop. They feel that unless every little detail is </p>
    <p class="calibre_2">pinned down in excruciating detail they haven't earned their daily dollar. </p>
    <p class="calibre_2">This is a mistake for several reasons. First, it's naive to assume that a specification will ever capture</p>
    <p class="calibre_2">every detail and nuance of a system or its requirement. In restricted problem domains, there are</p>
    <p class="calibre_2">formal methods that can describe a system, but they still require the designer to explain the meaning</p>
    <p class="calibre_2">of the notation to the end users—there is still a human interpretation going on to mess things up. Even</p>
    <p class="calibre_2">without the problems inherent in this interpretation, it is very unlikely that the average user knows</p>
    <p class="calibre_2">going in to a project exactly what they need. They may say they have an understanding of the</p>
    <p class="calibre_2">requirement, and they may sign off on the 200-page document you produce, but you can guarantee</p>
    <p class="calibre_2">that once they see the running system you'll be inundated with change requests. </p>
    <p class="calibre_2">Second, there is a problem with the expressive power of language itself. All the diagramming </p>
    <p class="calibre_2">techniques and formal methods still rely on natural language expressions of the operations to be </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">performed.[2]</span></span></a> And natural language is really not up to the job. Look at the wording of any contract: in</p>
    <p class="calibre_2">an attempt to be precise, lawyers have to bend the language in the most unnatural ways. </p>
    <p class="calibre_2">[2] There are some formal techniques that attempt to express operations algebraically, but these</p>
    <p class="calibre_2">techniques are rarely used in practice. They still require that the analysts explain the meaning to the end </p>
    <p class="calibre_2">users. </p>
    <p class="calibre_2">Here's a challenge for you. Write a short description that tells someone how to tie bows in their </p>
    <p class="calibre_2">shoelaces. Go on, try it! </p>
    <p class="calibre_2">If you are anything like us, you probably gave up somewhere around "now roll your thumb and</p>
    <p class="calibre_2">forefinger so that the free end passes under and inside the left lace…." It is a phenomenally difficult</p>
    <p class="calibre_2">thing to do. And yet most of us can tie our shoes without conscious thought. </p>
    <p class="calibre_2">
      <span class="bold">Tip 57</span>
    </p>
    <p class="calibre_2">Some Things Are Better Done than Described</p>
    <p class="calibre_2">Finally, there is the straightjacket effect. A design that leaves the coder no room for interpretation robs </p>
    <p class="calibre_2">the programming effort of any skill and art. Some would say this is for the best, but they're wrong. </p>
    <p class="calibre_2">Often, it is only during coding that certain options become apparent. While coding, you may think </p>
    <p class="calibre_2">
      <span class="italic">"Look at that. Because of the particular way I coded this routine, I could add this additional functionality </span>
    </p>
    <p class="calibre_2"><span class="italic">with almost no effort" </span> or <span class="italic">"The specification says to do this, but I could achieve an almost identical </span></p>
    <p class="calibre_2"><span class="italic">result by doing it a different way, and I could do it in half the time." </span> Clearly, you shouldn't just hack in </p>
    <p class="calibre_2">and make the changes, but you wouldn't even have spotted the opportunity if you were constrained by </p>
    <p class="calibre_2">an overly prescriptive design. </p>
    <p class="calibre_2">As a Pragmatic Programmer, you should tend to view requirements gathering, design, and</p>
    <p class="calibre_2">implementation as different facets of the same process—the delivery of a quality system. Distrust</p>
    <p class="calibre_2">environments where requirements are gathered, specifications are written, and then coding starts, all</p>
    <p class="calibre_2">in isolation. Instead, try to adopt a seamless approach: specification and implementation are simply</p>
    <p class="calibre_2">different aspects of the same process—an attempt to capture and codify a requirement. Each should</p>
    <p class="calibre_2">flow directly into the next, with no artificial boundaries. You'll find that a healthy development process</p>
    <p class="calibre_2">encourages feedback from implementation and testing into the specification process. </p>
    <p class="calibre_2">Just to be clear, we are not against generating specifications. Indeed, we recognize that there are</p>
    <p class="calibre_2">times where incredibly detailed specifications are demanded—for contractual reasons, because of the</p>
    <p class="calibre_2">environment where you work, or because of the nature of the product you are developing. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[3] Just b</span></span></a>e</p>
    <p class="calibre_2">aware that you reach a point of diminishing, or even negative, returns as the specifications get more </p>
    <p class="calibre_2">and more detailed. Also be careful about building specifications layered on top of specifications, </p>
    <p class="calibre_2">without any supporting implementation or prototyping; it's all too easy to specify something that can't </p>
    <p class="calibre_2">be built. </p>
    <p class="calibre_2">[3] Detailed specifications are clearly appropriate for life-critical systems. We feel they should also be</p>
    <p class="calibre_2">produced for interfaces and libraries used by others. When your entire output is seen as a set of routine </p>
    <p class="calibre_2">calls, you'd better make sure those calls are well specified. </p>
    <p class="calibre_2">The longer you allow specifications to be security blankets, protecting developers from the scary world </p>
    <p class="calibre_2">of writing code, the harder it will be to move on to hacking out code. Don't fall into this specification </p>
    <p class="calibre_2">spiral: at some point, you need to start coding! If you find your team all wrapped up in warm, comfy </p>
    <p class="calibre_2">specifications, break them out. Look at prototyping, or consider a tracer bullet development. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Tracer Bullets</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00176.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00033.jpg"/>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">The shoelace example mentioned in the text is an interesting illustration of the problems of </p>
    <p class="calibre_2">written descriptions. Did you consider describing the process using diagrams rather than </p>
    <p class="calibre_2">words? Photographs? Some formal notation from topology? Models with wire laces? How </p>
    <p class="calibre_2">would you teach a toddler? </p>
    <p class="calibre_2">Sometimes a picture is worth more than any number of words. Sometimes it is worthless. If </p>
    <p class="calibre_2">you find yourself overspecifying, would pictures or special notations help? How detailed do </p>
    <p class="calibre_2">they have to be? When is a drawing tool better than a whiteboard? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00142.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00350.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Circles and Arrows</span>
    </p>
    <p class="calibre_2">
      <span class="italic">[photographs] with circles and arrows and a paragraph on the back of each one explaining what each</span>
    </p>
    <p class="calibre_2">
      <span class="italic">one was, to be used as evidence against us…</span>
    </p>
    <p class="calibre_2">
      <span class="bold">Arlo Guthrie, "Alice's Restaurant" </span>
    </p>
    <p class="calibre_2">From structured programming, through chief programmer teams, CASE tools, waterfall development, </p>
    <p class="calibre_2">the spiral model, Jackson, ER diagrams, Booch clouds, OMT, Objectory, and Coad/Yourdon, to</p>
    <p class="calibre_2">today's UML, computing has never been short of methods intended to make programming more like</p>
    <p class="calibre_2">engineering. Each method gathers its disciples, and each enjoys a period of popularity. Then each is</p>
    <p class="calibre_2">replaced by the next. Of all of them, perhaps only the first—structured programming— has enjoyed a</p>
    <p class="calibre_2">long life. </p>
    <p class="calibre_2">Yet some developers, adrift in a sea of sinking projects, keep clinging to the latest fad just as </p>
    <p class="calibre_2">shipwreck victims latch onto passing driftwood. As each new piece floats by they painfully swim over, </p>
    <p class="calibre_2">hoping it will be better. At the end of the day, though, it doesn't matter how good the flotsam is, the </p>
    <p class="calibre_2">developers are still aimlessly adrift. </p>
    <p class="calibre_2">Don't get us wrong. We like (some) formal techniques and methods. But we believe that blindly </p>
    <p class="calibre_2">adopting any technique without putting it into the context of your development practices and </p>
    <p class="calibre_2">capabilities is a recipe for disappointment. </p>
    <p class="calibre_2">
      <span class="bold">Tip 58</span>
    </p>
    <p class="calibre_2">Don't Be a Slave to Formal Methods</p>
    <p class="calibre_2">Formal methods have some serious shortcomings. </p>
    <p class="calibre_2">Most formal methods capture requirements using a combination of diagrams and some</p>
    <p class="calibre_2">supporting words. These pictures represent the designers' understanding of the requirements. </p>
    <p class="calibre_2">However in many cases these diagrams are meaningless to the end users, so the designers</p>
    <p class="calibre_2">have to interpret them. Therefore, there is no real formal checking of the requirements by the</p>
    <p class="calibre_2">actual user of the system—everything is based on the designers' explanations, just as in</p>
    <p class="calibre_2">old-fashioned written requirements. We see some benefit in capturing requirements this way, </p>
    <p class="calibre_2">but we prefer, where possible, to show the user a prototype and let them play with it. </p>
    <p class="calibre_2">Formal methods seem to encourage specialization. One group of people works on a data </p>
    <p class="calibre_2">model, another looks at the architecture, while requirements gatherers collect use cases (or </p>
    <p class="calibre_2">their equivalent). We've seen this lead to poor communication and wasted effort. There is also </p>
    <p class="calibre_2">a tendency to fall back into the <span class="italic">us versus them</span> mentality of designers against coders. We </p>
    <p class="calibre_2">prefer to understand the whole of the system we're working on. It may not be possible to have </p>
    <p class="calibre_2">an in-depth grasp of every aspect of a system, but you should know how the components </p>
    <p class="calibre_2">interact, where the data lives, and what the requirements are. </p>
    <p class="calibre_2">We like to write adaptable, dynamic systems, using metadata to allow us to change the </p>
    <p class="calibre_2">character of applications at runtime. Most current formal methods combine a static object or </p>
    <p class="calibre_2">data model with some kind of event- or activity-charting mechanism. We haven't yet come </p>
    <p class="calibre_2">across one that allows us to illustrate the kind of dynamism we feel systems should exhibit. In </p>
    <p class="calibre_2">fact, most formal methods will lead you astray, encouraging you to set up static relationships </p>
    <p class="calibre_2">between objects that really should be knitted together dynamically. </p>
    <p class="calibre_2">
      <span class="bold">Do Methods Pay Off? </span>
    </p>
    <p class="calibre_2"><span class="calibre_5"><span class="underline">In a 1999 CACM article [Gla99b</span></span>], Robert Glass reviews the research into the productivity and quality </p>
    <p class="calibre_2">improvements gained using seven different software development technologies (4GLs, structured </p>
    <p class="calibre_2">techniques, CASE tools, formal methods, clean room methodology, process models, and object </p>
    <p class="calibre_2">orientation). He reports that the initial hype surrounding all of these methods was overblown. Although </p>
    <p class="calibre_2">there is an indication that some methods have benefits, these benefits start to manifest themselves </p>
    <p class="calibre_2">only after a significant productivity and quality drop while the technique is adopted and its users train </p>
    <p class="calibre_2">themselves. Never underestimate the cost of adopting new tools and methods. Be prepared to treat </p>
    <p class="calibre_2">the first projects using these techniques as a learning experience. </p>
    <p class="calibre_2">
      <span class="bold">Should We Use Formal Methods? </span>
    </p>
    <p class="calibre_2">Absolutely. But always remember that formal development methods are just one more tool in the</p>
    <p class="calibre_2">toolbox. If, after careful analysis, you feel you need to use a formal method, then embrace it—but</p>
    <p class="calibre_2">remember who is in charge. Never become a slave to a methodology: circles and arrows make poor</p>
    <p class="calibre_2">masters. Pragmatic Programmers look at methodologies critically, then extract the best from each and</p>
    <p class="calibre_2">meld them into a set of working practices that gets better each month. This is crucial. You should work</p>
    <p class="calibre_2">constantly to refine and improve your processes. Never accept the rigid confines of a methodology as</p>
    <p class="calibre_2">the limits of your world. </p>
    <p class="calibre_2">Don't give in to the false authority of a method. People may walk into meetings with an acre of class </p>
    <p class="calibre_2">diagrams and 150 use cases, but all that paper is still just their fallible interpretation of requirements </p>
    <p class="calibre_2">and design. Try not to think about how much a tool cost when you look at its output. </p>
    <p class="calibre_2">
      <span class="bold">Tip 59</span>
    </p>
    <p class="calibre_2">Expensive Too Do Not Produce Better Designs</p>
    <p class="calibre_2">Formal methods certainly have their place in development. However, if you come across a project </p>
    <p class="calibre_2">where the philosophy is "the class diagram is the application, the rest is mechanical coding," you know </p>
    <p class="calibre_2">you're looking at a waterlogged project team and a long paddle home. </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00209.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00118.jpg"/>
    </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Requirements Pit</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Use case diagrams are part of the UML process for gathering requirements (see <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">The </span></span></a></p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Requirements Pit</span></span></a>). Are they an effective way of communicating with your users? If not, why </p>
    <p class="calibre_2">are you using them? </p>
    <p class="calibre_2">How can you tell if a formal method is bringing your team benefits? What can you measure? </p>
    <p class="calibre_2">What constitutes an improvement? Can you distinguish between benefits of the tool and </p>
    <p class="calibre_2">increased experience on the part of team members? </p>
    <p class="calibre_2">Where is the break-even point for introducing new methods to your team? How do you </p>
    <p class="calibre_2">evaluate the trade-off between future benefits and current losses of productivity as the tool is </p>
    <p class="calibre_2">introduced? </p>
    <p class="calibre_2">Are tools that work for large projects good for small ones? How about the other way around? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00218.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00344.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00199.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00330.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Chapter 8. Pragmatic Projects</span>
    </p>
    <p class="calibre_2">As your project gets under way, we need to move away from issues of individual philosophy and </p>
    <p class="calibre_2">coding to talk about larger, project-sized issues. We aren't going to go into specifics of project </p>
    <p class="calibre_2">management, but we will talk about a handful of critical areas that can make or break any project. </p>
    <p class="calibre_2">As soon as you have more than one person working on a project, you need to establish some ground </p>
    <p class="calibre_2">rules and delegate parts of the project accordingly. In <span class="italic">Pragmatic Teams, </span> we'll show how to do this </p>
    <p class="calibre_2">while honoring the pragmatic philosophy. </p>
    <p class="calibre_2">The single most important factor in making project-level activities work consistently and reliably is to </p>
    <p class="calibre_2">automate your procedures. We'll explain why, and show some real-life examples in <span class="italic">Ubiquitous </span></p>
    <p class="calibre_2">
      <span class="italic">Automation. </span>
    </p>
    <p class="calibre_2">Earlier, we talked about testing as you code. In <span class="italic">Ruthless Testing, </span> we go to the next step of</p>
    <p class="calibre_2">project-wide testing philosophy and tools—especially if you don't have a large QA staff at your beck</p>
    <p class="calibre_2">and call. </p>
    <p class="calibre_2">The only thing that developers dislike more than testing is documentation. Whether you have technical </p>
    <p class="calibre_2">writers helping you or are doing it on your own, we'll show you how to make the chore less painful and </p>
    <p class="calibre_2">more productive in <span class="italic">It's All Writing. </span></p>
    <p class="calibre_2">Success is in the eye of the beholder—the sponsor of the project. The perception of success is what</p>
    <p class="calibre_2">counts, and in <span class="italic">Great Expectations</span> we'll show you some tricks to delight every project's sponsor. </p>
    <p class="calibre_2">The last tip in the book is a direct consequence of all the rest. In <span class="italic">Pride and Prejudice, </span> we encourage </p>
    <p class="calibre_2">you to sign your work, and to take pride in what you do. </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00024.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00332.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Pragmatic Teams</span>
    </p>
    <p class="calibre_2">
      <span class="italic">At Group L, Stoffel oversees six first-rate programmers, a managerial challenge </span>
    </p>
    <p class="calibre_2">
      <span class="italic">roughly comparable to herding cats. </span>
    </p>
    <p class="calibre_2">
      <span class="italic">
        <span class="bold">The Washington Post Magazine, June 9, 1985</span>
      </span>
    </p>
    <p class="calibre_2">So far in this book we've looked at pragmatic techniques that help an individual be a better </p>
    <p class="calibre_2">programmer. Can these methods work for teams as well? </p>
    <p class="calibre_2">The answer is a resounding "yes!" There are advantages to being a pragmatic individual, </p>
    <p class="calibre_2">but these advantages are multiplied manyfold if the individual is working on a pragmatic </p>
    <p class="calibre_2">team. </p>
    <p class="calibre_2">In this section we'll look briefly at how pragmatic techniques can be applied to teams as a </p>
    <p class="calibre_2">whole. These notes are only a start. Once you've got a group of pragmatic developers </p>
    <p class="calibre_2">working in an enabling environment, they'll quickly develop and refine their own team </p>
    <p class="calibre_2">dynamics that work for them. </p>
    <p class="calibre_2">Let's recast some of the previous sections in terms of teams. </p>
    <p class="calibre_2">
      <span class="bold">No Broken Windows</span>
    </p>
    <p class="calibre_2">Quality is a team issue. The most diligent developer placed on a team that just doesn't care </p>
    <p class="calibre_2">will find it difficult to maintain the enthusiasm needed to fix niggling problems. The problem </p>
    <p class="calibre_2">is further exacerbated if the team actively discourages the developer from spending time </p>
    <p class="calibre_2">on these fixes. </p>
    <p class="calibre_2">Teams as a whole should not tolerate broken windows—those small imperfections that no</p>
    <p class="calibre_2">one fixes. The team <span class="italic">must</span> take responsibility for the quality of the product, supporting </p>
    <p class="calibre_2">developers who understand the <span class="italic">no broken windows</span> philosophy we describe in <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Software </span></span></a></p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Entropy, and encouraging those who haven't yet discovered it. </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">Some team methodologies have a <span class="italic">quality officer</span>—someone to whom the team delegates</p>
    <p class="calibre_2">the responsibility for the quality of the deliverable. This is clearly ridiculous: quality can</p>
    <p class="calibre_2">come only from the individual contributions of <span class="italic">all</span> team members. </p>
    <p class="calibre_2">
      <span class="bold">Boiled Frogs</span>
    </p>
    <p class="calibre_2">Remember the poor frog in the pan of water, back in <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Stone Soup and Boiled Frogs? </span></span></a> It </p>
    <p class="calibre_2">doesn't notice the gradual change in its environment, and ends up cooked. The same can </p>
    <p class="calibre_2">happen to individuals who aren't vigilant. It can be difficult to keep an eye on your overall </p>
    <p class="calibre_2">environment in the heat of project development. </p>
    <p class="calibre_2">It's even easier for teams as a whole to get boiled. People assume that someone else is </p>
    <p class="calibre_2">handling an issue, or that the team leader must have OK'd a change that your user is </p>
    <p class="calibre_2">requesting. Even the best-intentioned teams can be oblivious to significant changes in their </p>
    <p class="calibre_2">projects. </p>
    <p class="calibre_2">Fight this. Make sure everyone actively monitors the environment for changes. Maybe </p>
    <p class="calibre_2">appoint a <span class="italic">chief water tester. </span> Have this person check constantly for increased scope, </p>
    <p class="calibre_2">decreased time scales, additional features, new environments—anything that wasn't in the</p>
    <p class="calibre_2">original agreement. Keep metrics on new requirements (see page 209). The team needn't</p>
    <p class="calibre_2">reject changes out of hand—you simply need to be aware that they're happening. </p>
    <p class="calibre_2">Otherwise, it'll be <span class="italic">you</span> in the hot water. </p>
    <p class="calibre_2">
      <span class="bold">Communicate</span>
    </p>
    <p class="calibre_2">It's obvious that developers in a team must talk to each other. We gave some suggestions </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">to facilitate this in Communicate! </span></span></a>. However, it's easy to forget that the team itself has a </p>
    <p class="calibre_2">presence within the organization. The team as an entity needs to communicate clearly with </p>
    <p class="calibre_2">the rest of the world. </p>
    <p class="calibre_2">To outsiders, the worst project teams are those that appear sullen and reticent. They hold </p>
    <p class="calibre_2">meetings with no structure, where no one wants to talk. Their documents are a mess: no </p>
    <p class="calibre_2">two look the same, and each uses different terminology. </p>
    <p class="calibre_2">Great project teams have a distinct personality. People look forward to meetings with them, </p>
    <p class="calibre_2">because they know that they'll see a well-prepared performance that makes everyone feel </p>
    <p class="calibre_2">good. The documentation they produce is crisp, accurate, and consistent. The team </p>
    <p class="calibre_2">speaks with one voice. <a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">[1]</span></span></a> They may even have a sense of humor. </p>
    <p class="calibre_2">[1] The team speaks with one voice-externally. Internally, we strongly encourage lively, robust debate. </p>
    <p class="calibre_2">Good developers tend to be passionate about their work. </p>
    <p class="calibre_2">There is a simple marketing trick that helps teams communicate as one: generate a brand. </p>
    <p class="calibre_2">When you start a project, come up with a name for it, ideally something off-the-wall. (In the </p>
    <p class="calibre_2">past, we've named projects after things such as killer parrots that prey on sheep, optical </p>
    <p class="calibre_2">illusions, and mythical cities.) Spend 30 minutes coming up with a zany logo, and use it on </p>
    <p class="calibre_2">your memos and reports. Use your team's name liberally when talking with people. It </p>
    <p class="calibre_2">sounds silly, but it gives your team an identity to build on, and the world something </p>
    <p class="calibre_2">memorable to associate with your work. </p>
    <p class="calibre_2">
      <span class="bold">Don't Repeat Yourself</span>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">In The Evils of Duplication</span></span></a>, we talked about the difficulties of eliminating duplicated work </p>
    <p class="calibre_2">between members of a team. This duplication leads to wasted effort, and can result in a </p>
    <p class="calibre_2">maintenance nightmare. Clearly good communication can help here, but sometimes </p>
    <p class="calibre_2">something extra is needed. </p>
    <p class="calibre_2">Some teams appoint a member as the project librarian, responsible for coordinating </p>
    <p class="calibre_2">documentation and code repositories. Other team members can use this person as the first </p>
    <p class="calibre_2">port of call when they're looking for something. A good librarian will also be able to spot </p>
    <p class="calibre_2">impending duplication by reading the material that they're handling. </p>
    <p class="calibre_2">When the project's too big for one librarian (or when no one wants to play the role), appoint </p>
    <p class="calibre_2">people as focal points for various functional aspects of the work. If people want to talk over </p>
    <p class="calibre_2">date handling, they should know to talk with Mary. If there's a database schema issue, see </p>
    <p class="calibre_2">Fred. </p>
    <p class="calibre_2">And don't forget the value of groupware systems and local Usenet news-groups for </p>
    <p class="calibre_2">communicating and archiving questions and answers. </p>
    <p class="calibre_2">
      <span class="bold">Orthogonality</span>
    </p>
    <p class="calibre_2">Traditional team organization is based on the old-fashioned waterfall method of software </p>
    <p class="calibre_2">construction. Individuals are assigned roles based on their job function. You'll find business </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">analysts, architects, designers, programmers, testers, documenters, and the like.[2] Ther</span></span></a>e</p>
    <p class="calibre_2">is an implicit hierarchy here—the closer to the user you're allowed, the more senior you</p>
    <p class="calibre_2">are. </p>
    <p class="calibre_2">[2] In <span class="italic">The Rational Unified Process: An Introduction, </span> the author identifies 27 separate roles within a </p>
    <p class="calibre_2">project team! [<span class="calibre_5"><span class="underline">Kru98</span></span>]</p>
    <p class="calibre_2">Taking things to the extreme, some development cultures dictate strict divisions of </p>
    <p class="calibre_2">responsibility; coders aren't allowed to talk to testers, who in turn aren't allowed to talk to </p>
    <p class="calibre_2">the chief architect, and so on. Some organizations then compound the problem by having </p>
    <p class="calibre_2">different sub-teams report through separate management chains. </p>
    <p class="calibre_2">It is a mistake to think that the activities of a project—analysis, design, coding, and</p>
    <p class="calibre_2">testing—can happen in isolation. They can't. These are different views of the same</p>
    <p class="calibre_2">problem, and artificially separating them can cause a boatload of trouble. Programmers</p>
    <p class="calibre_2">who are two or three levels removed from the actual users of their code are unlikely to be</p>
    <p class="calibre_2">aware of the context in which their work is used. They will not be able to make informed</p>
    <p class="calibre_2">decisions. </p>
    <p class="calibre_2">
      <span class="bold">Tip 60</span>
    </p>
    <p class="calibre_2">Organize Around Functionality, Not Job Functions</p>
    <p class="calibre_2">We favor splitting teams functionally. Divide your people into small teams, each </p>
    <p class="calibre_2">responsible for a particular functional aspect of the final system. Let the teams organize </p>
    <p class="calibre_2">themselves internally, building on individual strengths as they can. Each team has </p>
    <p class="calibre_2">responsibilities to others in the project, as defined by their agreed-upon commitments. The </p>
    <p class="calibre_2">exact set of commitments changes with each project, as does the allocation of people into </p>
    <p class="calibre_2">teams. </p>
    <p class="calibre_2">Functionality here does not necessarily mean end-user use cases. The database access</p>
    <p class="calibre_2">layer counts, as does the help subsystem. We're looking for cohesive, largely</p>
    <p class="calibre_2">self-contained teams of people—exactly the same criteria we should be using when we</p>
    <p class="calibre_2">modularize code. There are warning signs that the team organization is wrong—a classic</p>
    <p class="calibre_2">example is having two subteams working on the same program module or class. </p>
    <p class="calibre_2">How does this functional style of organization help? Organize our resources using the </p>
    <p class="calibre_2">same techniques we use to organize code, using techniques such as contracts (<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Design by </span></span></a></p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Contract), decoupling (</span></span></a><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Decoupling and the Law of Demeter</span></span></a>), and orthogonality </p>
    <p class="calibre_2">(<a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Orthogonality), and we help isolate the team as a whole from the effects of change. If the </span></span></a></p>
    <p class="calibre_2">user suddenly decides to change database vendors, only the database team should be </p>
    <p class="calibre_2">affected. Should marketing suddenly decide to use an off-the-shelf tool for the calendar </p>
    <p class="calibre_2">function, the calendar group takes a hit. Properly executed, this kind of group approach can </p>
    <p class="calibre_2">dramatically reduce the number of interactions between individuals' work, reducing time </p>
    <p class="calibre_2">scales, increasing quality, and cutting down on the number of defects. This approach can </p>
    <p class="calibre_2">also lead to a more committed set of developers. Each team knows that they alone are </p>
    <p class="calibre_2">responsible for a particular function, so they feel more ownership of their output. </p>
    <p class="calibre_2">However, this approach works only with responsible developers and strong project</p>
    <p class="calibre_2">management. Creating a pool of autonomous teams and letting them loose without</p>
    <p class="calibre_2">leadership is a recipe for disaster. The project needs at least two "heads"—one technical, </p>
    <p class="calibre_2">the other administrative. The technical head sets the development philosophy and style, </p>
    <p class="calibre_2">assigns responsibilities to teams, and arbitrates the inevitable "discussions" between</p>
    <p class="calibre_2">people. The technical head also looks constantly at the big picture, trying to find any</p>
    <p class="calibre_2">unnecessary commonality between teams that could reduce the orthogonality of the overall</p>
    <p class="calibre_2">effort. The administrative head, or project manager, schedules the resources that the</p>
    <p class="calibre_2">teams need, monitors and reports on progress, and helps decide priorities in terms of</p>
    <p class="calibre_2">business needs. The administrative head might also act as the team's ambassador when</p>
    <p class="calibre_2">communicating with the outside world. </p>
    <p class="calibre_2">Teams on larger projects need additional resources: a librarian who indexes and stores </p>
    <p class="calibre_2">code and documentation, a tool builder who provides common tools and environments, </p>
    <p class="calibre_2">operational support, and so on. </p>
    <p class="calibre_2">This type of team organization is similar in spirit to the old chief programmer team concept, </p>
    <p class="calibre_2"><span class="calibre_5"><span class="underline">first documented in 1972 [Bak72</span></span>]. </p>
    <p class="calibre_2">
      <span class="bold">Automation</span>
    </p>
    <p class="calibre_2">A great way to ensure both consistency and accuracy is to automate everything the team </p>
    <p class="calibre_2">does. Why lay code out manually when your editor can do it automatically as you type? </p>
    <p class="calibre_2">Why complete test forms when the overnight build can run tests automatically? </p>
    <p class="calibre_2">Automation is an essential component of every project team—important enough for us to</p>
    <p class="calibre_2">dedicate an entire section to it, starting on the following page. To ensure that things get</p>
    <p class="calibre_2">automated, appoint one or more team members as <span class="italic">tool builders</span> to construct and deploy </p>
    <p class="calibre_2">the tools that automate the project drudgery. Have them produce makefiles, shell scripts, </p>
    <p class="calibre_2">editor templates, utility programs, and the like. </p>
    <p class="calibre_2">
      <span class="bold">Know When to Stop Adding Paint</span>
    </p>
    <p class="calibre_2">Remember that teams are made up of individuals. Give each member the ability to shine in </p>
    <p class="calibre_2">his or her own way. Give them just enough structure to support them and to ensure that the </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00006.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00325.jpg"/>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">project delivers against its requirements. Then, like the painter in Good-Enough Software, </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">resist the temptation to add more paint. </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Software Entropy</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Stone Soup and Boiled Frogs</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Good-Enough Software</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Communicate! </span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Evils of Duplication</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Orthogonality</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Design by Contract</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Decoupling and the Law of Demeter</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Ubiquitous Automation</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
    <p class="calibre_2">Look around for successful teams outside the area of software development. What </p>
    <p class="calibre_2">makes them successful? Do they use any of the processes discussed in this </p>
    <p class="calibre_2">section? </p>
    <p class="calibre_2">Next time you start a project, try convincing people to brand it. Give your </p>
    <p class="calibre_2">organization time to become used to the idea, and then do a quick audit to see </p>
    <p class="calibre_2">what difference it made, both within the team and externally. </p>
    <p class="calibre_2">Team Algebra: In school, we are given problems such as "If it takes 4 workers 6 </p>
    <p class="calibre_2">hours to dig a ditch, how long would it take 8 workers?" In real life, however, what </p>
    <p class="calibre_2">factors affect the answer to: "If it takes 4 programmers 6 months to develop an </p>
    <p class="calibre_2">application, how long would it take 8 programmers?" In how many scenarios is the </p>
    <p class="calibre_2">time actually reduced? </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00270.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00092.jpg"/>
    </p>
    <p class="calibre_2">I l@ve RuBoard</p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">&#13;
</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Ubiquitous Automation</span>
    </p>
    <p class="calibre_2">
      <span class="italic">Civilization advances by extending the number of important operations we can </span>
    </p>
    <p class="calibre_2">
      <span class="italic">perform without thinking. </span>
    </p>
    <p class="calibre_2">
      <span class="bold">Alfred North Whitehead</span>
    </p>
    <p class="calibre_2">At the dawn of the age of automobiles, the instructions for starting a Model-T Ford were</p>
    <p class="calibre_2">more than two pages long. With modern cars, you just turn the key—the starting procedure</p>
    <p class="calibre_2">is automatic and foolproof. A person following a list of instructions might flood the engine, </p>
    <p class="calibre_2">but the automatic starter won't. </p>
    <p class="calibre_2">Although computing is still an industry at the Model-T stage, we can't afford to go through </p>
    <p class="calibre_2">two pages of instructions again and again for some common operation. Whether it is the </p>
    <p class="calibre_2">build and release procedure, code review paperwork, or any other recurring task on the </p>
    <p class="calibre_2">project, it has to be automatic. We may have to build the starter and fuel injector from </p>
    <p class="calibre_2">scratch, but once it's done, we can just turn the key from then on. </p>
    <p class="calibre_2">In addition, we want to ensure consistency and repeatability on the project. Manual </p>
    <p class="calibre_2">procedures leave consistency up to chance; repeatability isn't guaranteed, especially if </p>
    <p class="calibre_2">aspects of the procedure are open to interpretation by different people. </p>
    <p class="calibre_2">
      <span class="bold">All on Automatic</span>
    </p>
    <p class="calibre_2">We were once at a client site where all the developers were using the same IDE. Their</p>
    <p class="calibre_2">system administrator gave each developer a set of instructions on installing add-on</p>
    <p class="calibre_2">packages to the IDE. These instructions filled many pages—pages full of click here, scroll</p>
    <p class="calibre_2">there, drag this, double-click that, and do it again. </p>
    <p class="calibre_2">Not surprisingly, every developer's machine was loaded slightly differently. Subtle </p>
    <p class="calibre_2">differences in the application's behavior occurred when different developers ran the same </p>
    <p class="calibre_2">code. Bugs would appear on one machine but not on others. Tracking down version </p>
    <p class="calibre_2">differences of any one component usually revealed a surprise. </p>
    <p class="calibre_2">
      <span class="bold">Tip 61</span>
    </p>
    <p class="calibre_2">Don't Use Manual Procedures</p>
    <p class="calibre_2">People just aren't as repeatable as computers are. Nor should we expect them to be. A </p>
    <p class="calibre_2">shell script or batch file will execute the same instructions, in the same order, time after </p>
    <p class="calibre_2">time. It can be put under source control, so you can examine changes to the procedure </p>
    <p class="calibre_2">over time as well ("but it <span class="italic">used</span> to work…"). </p>
    <p class="calibre_2">Another favorite tool of automation is cron (or "at" on Windows NT). It allows us to schedule</p>
    <p class="calibre_2">unattended tasks to run periodically—usually in the middle of the night. For example, the</p>
    <p class="calibre_2">following crontab file specifies that a project's nightly command be run at five minutes past </p>
    <p class="calibre_2">midnight every day, that the backup be run at 3:15 a.m. on weekdays, and that </p>
    <p class="calibre_2">expense_reports be run at midnight on the first of the month. </p>
    <p class="calibre_2"># <span class="italic">MIN HOUR DAY MONTH DAYOFWEEK COMMAND</span></p>
    <p class="calibre_2"># ---------------------------------------------------------------</p>
    <p class="calibre_2">5 0 * * * /projects/Manhattan/bin/nightly</p>
    <p class="calibre_2">15 3 * * 1-5 /usr/local/bin/backup</p>
    <p class="calibre_2">0 0 1 * * /home/accounting/expense_reports</p>
    <p class="calibre_2">Using cron, we can schedule backups, the nightly build, Web site maintenance, and</p>
    <p class="calibre_2">anything else that needs to be done—unattended, automatically. </p>
    <p class="calibre_2">
      <span class="bold">Compiling the Project</span>
    </p>
    <p class="calibre_2">Compiling the project is a chore that should be reliable and repeat-able. We generally </p>
    <p class="calibre_2">compile projects with makefiles, even when using an IDE environment. There are several </p>
    <p class="calibre_2">advantages in using makefiles. It is a scripted, automatic procedure. We can add in hooks </p>
    <p class="calibre_2">to generate code for us, and run regression tests automatically. IDEs have their </p>
    <p class="calibre_2">advantages, but with IDEs alone it can be hard to achieve the level of automation that </p>
    <p class="calibre_2">we're looking for. We want to check out, build, test, and ship with a single command. </p>
    <p class="calibre_2">
      <span class="bold">Generating Code</span>
    </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">In The Evils of Duplication</span></span></a>, we advocated generating code to derive knowledge from </p>
    <p class="calibre_2">common sources. We can exploit make's dependency analysis mechanism to make this </p>
    <p class="calibre_2">process easy. It's a pretty simple matter to add rules to a makefile to generate a file from </p>
    <p class="calibre_2">some other source automatically. For example, suppose we wanted to take an XML file, </p>
    <p class="calibre_2">generate a Java file from it, and compile the result. </p>
    <p class="calibre_2">.SUFFIXES: .Java .class .xml</p>
    <p class="calibre_2">.xml.java:</p>
    <p class="calibre_2">perl convert.pl $&lt; &gt; $@</p>
    <p class="calibre_2">.Java.class:</p>
    <p class="calibre_2">$(JAVAC) $(JAVAC_FLAGS) $&lt; </p>
    <p class="calibre_2">Type make test.class, and make will automatically look for a file named test.xml, build a </p>
    <p class="calibre_2">.java file by running a Perl script, and then compile that file to produce test.class. </p>
    <p class="calibre_2">We can use the same sort of rules to generate source code, header files, or documentation </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">automatically from some other form as well (see Code Generators</span></span></a>). </p>
    <p class="calibre_2">
      <span class="bold">Regression Tests</span>
    </p>
    <p class="calibre_2">You can also use the makefile to run regression tests for you, either for an individual </p>
    <p class="calibre_2">module or for an entire subsystem. You can easily test the <span class="italic">entire</span> project with just one </p>
    <p class="calibre_2">command at the top of the source tree, or you can test an individual module by using the </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">same command in a single directory. See Ruthless Testing</span></span></a>, for more on regression testing. </p>
    <p class="calibre_2">
      <span class="bold">Recursive make</span>
    </p>
    <p class="calibre_2">Many projects set up recursive, hierarchical for project builds and testing. But be </p>
    <p class="calibre_2">aware of some potential problems. </p>
    <p class="calibre_2">make calculates dependencies between the various targets it has to build. But it </p>
    <p class="calibre_2">can analyze only the dependencies that exist within one single make invocation. </p>
    <p class="calibre_2">In particular, a recursive make has no knowledge of dependencies that other </p>
    <p class="calibre_2">invocations of make may have. If you are careful and precise, you can get the</p>
    <p class="calibre_2">proper results, but it's easy to cause extra work unnecessarily—or miss a</p>
    <p class="calibre_2">dependency and <span class="italic">not</span> recompile when it's needed. </p>
    <p class="calibre_2">In addition, build dependencies may not be the same as test dependencies, and </p>
    <p class="calibre_2">you may need separate hierarchies. </p>
    <p class="calibre_2">
      <span class="bold">Build Automation</span>
    </p>
    <p class="calibre_2">A <span class="italic">build</span> is a procedure that takes an empty directory (and a known compilation</p>
    <p class="calibre_2">environment) and builds the project from scratch, producing whatever you hope to produce</p>
    <p class="calibre_2">as a final deliverable—a CD-ROM master image or a self-extracting archive, for instance. </p>
    <p class="calibre_2">Typically a project build will encompass the following steps. </p>
    <p class="calibre_2">1. Check out the source code from the repository. </p>
    <p class="calibre_2">2. Build the project from scratch, typically from a top-level makefile. Each build is </p>
    <p class="calibre_2">marked with some form of release or version number, or perhaps a date stamp. </p>
    <p class="calibre_2">3. Create a distributable image. This procedure may entail fixing file ownership and </p>
    <p class="calibre_2">permissions, and producing all examples, documentation, README files, and </p>
    <p class="calibre_2">anything else that will ship with the product, in the exact format that will be required </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">when you ship.[3]</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">[3] If you are producing a CD-ROM in ISO9660 format, for example, you would run the</p>
    <p class="calibre_2">program that produces a bit-for-bit image of the 9660 file system. Why wait until the night </p>
    <p class="calibre_2">before you ship to make sure it works? </p>
    <p class="calibre_2">4. Run specified tests (make test). </p>
    <p class="calibre_2">For most projects, this level of build is run automatically every night. In this nightly build, </p>
    <p class="calibre_2">you will typically run more complete tests than an individual might run while building some </p>
    <p class="calibre_2">specific portion of the project. The important point is to have the full build run <span class="italic">all</span> available </p>
    <p class="calibre_2">tests. You want to know if a regression test failed because of one of today's code changes. </p>
    <p class="calibre_2">By identifying the problem close to the source, you stand a better chance of finding and </p>
    <p class="calibre_2">fixing it. </p>
    <p class="calibre_2">When you don't run tests regularly, you may discover that the application broke due to a </p>
    <p class="calibre_2">code change made three months ago. Good luck finding that one. </p>
    <p class="calibre_2">
      <span class="bold">Final Builds</span>
    </p>
    <p class="calibre_2"><span class="italic">Final builds, </span> which you intend to ship as products, may have different requirements from </p>
    <p class="calibre_2">the regular nightly build. A final build may require that the repository be locked, or tagged </p>
    <p class="calibre_2">with the release number, that optimization and debug flags be set differently, and so on. </p>
    <p class="calibre_2">We like to use a separate make target (such as make final) that sets all of these </p>
    <p class="calibre_2">parameters at once. </p>
    <p class="calibre_2">Remember that if the product is compiled differently from earlier versions, then you must </p>
    <p class="calibre_2">test against <span class="italic">this</span> version all over again. </p>
    <p class="calibre_2">
      <span class="bold">Automatic Administrivia</span>
    </p>
    <p class="calibre_2">Wouldn't it be nice if programmers could actually devote all of their time to programming? </p>
    <p class="calibre_2">Unfortunately, this is rarely the case. There is e-mail to be answered, paperwork to be filled </p>
    <p class="calibre_2">out, documents to be posted to the Web, and so on. You may decide to create a shell </p>
    <p class="calibre_2">script to do some of the dirty work, but you still have to remember to run the script when </p>
    <p class="calibre_2">needed. </p>
    <p class="calibre_2"><a href="index_split_000.html#filepos109"><span class="calibre_5"><span class="underline">Because memory is the second thing you lose as you age,[4] we don't want to rely on it to</span></span></a>o</p>
    <p class="calibre_2">heavily. We can run scripts to perform procedures for us automatically, based on the </p>
    <p class="calibre_2"><span class="italic">content</span> of source code and documents. Our goal is to maintain an automatic, unattended, </p>
    <p class="calibre_2">content-driven workflow. </p>
    <p class="calibre_2">[4] What's the first? I forget. </p>
    <p class="calibre_2">
      <span class="bold">Web Site Generation</span>
    </p>
    <p class="calibre_2">Many development teams use an internal Web site for project communication, and we think </p>
    <p class="calibre_2">this is a great idea. But we don't want to spend too much time maintaining the Web site, </p>
    <p class="calibre_2">and we don't want to let it get stale or out of date. Misleading information is worse than no </p>
    <p class="calibre_2">information at all. </p>
    <p class="calibre_2">Documentation that is extracted from code, requirements analyses, design documents, and </p>
    <p class="calibre_2">any drawings, charts, or graphs all need to be published to the Web on a regular basis. We</p>
    <p class="calibre_2">like to publish these documents automatically as part of the nightly build or as a hook into </p>
    <p class="calibre_2">the source code check-in procedure. </p>
    <p class="calibre_2">However it is done, Web content should be generated automatically from information in the </p>
    <p class="calibre_2">repository and published <span class="italic">without</span> human intervention. This is really another application of </p>
    <p class="calibre_2">the <span class="italic">DRY</span> principle: information exists in one form as checked-in code and documents. The</p>
    <p class="calibre_2">view from the Web browser is simply that—just a view. You shouldn't have to maintain that</p>
    <p class="calibre_2">view by hand. </p>
    <p class="calibre_2">Any information generated by the nightly build should be accessible on the development </p>
    <p class="calibre_2">Web site: results of the build itself (for example, the build results might be presented as a </p>
    <p class="calibre_2">one-page summary that includes compiler warnings, errors, and current status), regression </p>
    <p class="calibre_2">tests, performance statistics, coding metrics and any other static analysis, and so on. </p>
    <p class="calibre_2">
      <span class="bold">Approval Procedures</span>
    </p>
    <p class="calibre_2">Some projects have various administrative workflows that must be followed. For instance, </p>
    <p class="calibre_2">code or design reviews need to be scheduled and followed through, approvals may need to</p>
    <p class="calibre_2">be granted, and so on. We can use automation—and especially the Web site—to help</p>
    <p class="calibre_2">ease the paperwork burden. </p>
    <p class="calibre_2">Suppose you wanted to automate code review scheduling and approval. You might put a </p>
    <p class="calibre_2">special marker in each source code file:</p>
    <p class="calibre_2">/* <span class="italic">Status: needs_review</span> */</p>
    <p class="calibre_2">A simple script could go through all of the source code and look for all files that had a </p>
    <p class="calibre_2">status of needs_review, indicating that they were ready to be reviewed. You could then </p>
    <p class="calibre_2">post a list of those files as a Web page, automatically send e-mail to the appropriate </p>
    <p class="calibre_2">people, or even schedule a meeting automatically using some calendar software. </p>
    <p class="calibre_2">You can set up a form on a Web page for the reviewers to register approval or disapproval. </p>
    <p class="calibre_2">After the review, the status can be automatically changed to reviewed. Whether you have a </p>
    <p class="calibre_2">code walk-through with all the participants is up to you; you can still do the paperwork </p>
    <p class="calibre_2">automatically. (In an article in the April 1999 CACM, Robert Glass summarizes research </p>
    <p class="calibre_2">that seems to indicate that, while code inspection is effective, conducting reviews in </p>
    <p class="calibre_2"><span class="calibre_5"><span class="underline">meetings is not [Gla99a</span></span>].)</p>
    <p class="calibre_2">
      <span class="bold">The Cobbler's Children</span>
    </p>
    <p class="calibre_2">The cobbler's children have no shoes. Often, people who develop software use the poorest </p>
    <p class="calibre_2">tools to do the job. </p>
    <p class="calibre_2">But we have all the raw materials we need to craft better tools. We have cron. We have </p>
    <p class="calibre_2">make, on both Windows and Unix platforms. And we have Perl and other high-level </p>
    <p class="calibre_2">scripting languages for quickly developing custom tools, Web page generators, code </p>
    <p class="calibre_2">generators, test harnesses, and so on. </p>
    <p class="calibre_2">Let the computer do the repetitious, the mundane—it will do a better job of it than we</p>
    <p class="calibre_2">would. We've got more important and more difficult things to do. </p>
    <p class="calibre_2">
      <img class="calibre_6" src="images/00327.jpg"/>
    </p>
    <p class="calibre_2">
      <img class="calibre_1" src="images/00205.jpg"/>
    </p>
    <p class="calibre_2">
      <span class="bold">Related sections include:</span>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Cat Ate My Source Code</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Evils of Duplication</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">The Power of Plain Text</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Shell Games</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Debugging</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Code Generators</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Pragmatic Teams</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">Ruthless Testing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <a href="index_split_000.html#filepos109">
        <span class="calibre_5">
          <span class="underline">It's All Writing</span>
        </span>
      </a>
    </p>
    <p class="calibre_2">
      <span class="bold">Challenges</span>
    </p>
  </body>
</html>
